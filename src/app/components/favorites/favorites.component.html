<ion-header>
  <ion-buttons slot="start">
    <ion-menu-button></ion-menu-button>
  <ion-title>Recetas Favoritas</ion-title>
  </ion-buttons>
</ion-header>

<ion-toolbar>
   
   <ion-segment [(ngModel)]="selectedCategory" (ionChange)="filterFavorites()">
     <ion-segment-button value="desayuno">
       <ion-label>Desayuno</ion-label>
     </ion-segment-button>
     <ion-segment-button value="almuerzo">
       <ion-label>Almuerzo</ion-label>
     </ion-segment-button>
     <ion-segment-button value="cena">
       <ion-label>Cena</ion-label>
     </ion-segment-button>
     <ion-segment-button value="postre">
       <ion-label>Postre</ion-label>
     </ion-segment-button>
   </ion-segment>
 
 </ion-toolbar>

<!-- {{ filteredFavorites | json }} -->
<ion-content>
 <ion-list>
   <!-- Iterar sobre las recetas favoritas filtradas -->
   <ion-card *ngFor="let recipe of filteredFavorites">
     <ion-img *ngIf="recipe.imageUrl" [src]="recipe.imageUrl" alt="Imagen de la receta"></ion-img>

     <ion-card-header>
       <ion-card-title>{{ recipe.titulo }}</ion-card-title>
     </ion-card-header>

     <ion-card-content>
       <!-- {{ recipe  | json}} -->
       <!-- Mostrar una descripcion corta -->
       {{ recipe.descripcion | slice: 0:100 }}...

       <!-- Botones para ver mas y eliminar de favoritos -->
       <ion-button fill="clear" (click)="openRecipeModal(recipe)">Ver más</ion-button>
       <ion-button fill="clear" color="danger" (click)="removeFromFavorites(recipe.id)">
         <ion-icon 
         [name]="isFavorite(recipe.id) ? 'heart' : 'heart-outline'" 
         [color]="isFavorite(recipe.id) ? 'danger' : 'medium'">
       </ion-icon>
     </ion-button>
       <ion-button fill="clear" color="primary" *ngIf="recipe.creadorId === userId" (click)="navigateToEdit(recipe.id)">
         Editar
       </ion-button>
     </ion-card-content>
   </ion-card>
 </ion-list>

 <!-- Modal de detalles de la receta -->
 <ion-modal [isOpen]="isModalOpen" (didDismiss)="closeModal()">
   <ng-template>
     <ion-header>
       <ion-toolbar>
         <ion-title>{{ selectedRecipe?.titulo }}</ion-title>
         <ion-buttons slot="end">
           <ion-button (click)="closeModal()">Cerrar</ion-button>
         </ion-buttons>
       </ion-toolbar>
     </ion-header>

     <ion-content>
       <ion-img *ngIf="selectedRecipe?.imageUrl" [src]="selectedRecipe?.imageUrl" alt="Imagen de la receta"></ion-img>

       <ion-list>
         <ion-item>
           <ion-label>
             <h2>{{ selectedRecipe?.titulo }}</h2>
           </ion-label>
         </ion-item>

         <!-- Descripción completa -->

         <ion-item *ngFor="let ing of availableIngredients">
           <ion-label>
             {{ ing.nombre }} - {{ ing.cantidad }} {{ ing.unidad }}
             <span *ngIf="ing.disponible" style="color: green;">Disponible</span>
             <span *ngIf="!ing.disponible" style="color: red;">No disponible</span>
           </ion-label>
         </ion-item>

   <ion-item>
        <ion-label>
         <h2>{{ selectedRecipe?.descripcion }}</h2>
       </ion-label>
     </ion-item>
   </ion-list>

       <ion-button (click)="closeModal()">Cerrar</ion-button>
     </ion-content>
   </ng-template>
 </ion-modal>
</ion-content>
