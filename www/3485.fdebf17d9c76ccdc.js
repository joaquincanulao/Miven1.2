"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3485],{3485:(k,f,t)=>{t.r(f),t.d(f,{LoginPageModule:()=>C});var m=t(177),c=t(4341),i=t(4742),u=t(9384),d=t(467),h=t(3146),p=t(5312),o=t(3953),v=t(4796),M=t(1182),F=t(8079);function L(n,s){if(1&n&&(o.j41(0,"ion-text",9),o.EFF(1),o.k0s()),2&n){const g=o.XpG();o.R7$(),o.JRh(g.errorMessage)}}const P=[{path:"",component:(()=>{var n;class s{constructor(e,r,l){this.authService=e,this.afAuth=r,this.firestore=l,this.email="",this.password="",this.errorMessage=""}onLogin(){var e=this;return(0,d.A)(function*(){try{yield e.authService.loginUser(e.email,e.password),console.log("Inicio de sesi\xf3n exitoso");const r=yield e.afAuth.currentUser;r&&e.saveFcmToken(r.uid)}catch(r){console.error("Error al iniciar sesi\xf3n: ",r),e.errorMessage=e.getErrorMessage(r)}})()}onGoogleLogin(){var e=this;return(0,d.A)(function*(){try{yield e.authService.loginWithGoogle(),console.log("Inicio de sesi\xf3n con Google exitoso")}catch(r){e.errorMessage=e.getErrorMessage(r)}})()}getErrorMessage(e){switch(e.code){case"auth/invalid-credential":return"Las credenciales proporcionadas no son v\xe1lidas. Por favor, verifica tu correo electr\xf3nico y contrase\xf1a.";case"auth/user-not-found":return"Usuario no encontrado. Por favor, registra una nueva cuenta.";case"auth/wrong-password":return"Contrase\xf1a incorrecta. Por favor, intenta de nuevo.";default:return"Ha ocurrido un error desconocido. Por favor, intenta de nuevo m\xe1s tarde."}}saveFcmToken(e){var r=this;return(0,d.A)(function*(){try{const l=(0,h.dG)(),a=yield(0,h.gf)(l,{vapidKey:p.c.vapidKey});a?(yield r.firestore.collection("usuarios").doc(e).update({fcmToken:a}),console.log("Token FCM guardado en Firestore")):console.log("No token available")}catch(l){console.error("Error obteniendo el token FCM: ",l)}})()}}return(n=s).\u0275fac=function(e){return new(e||n)(o.rXU(v.u),o.rXU(M.DS),o.rXU(F.Qe))},n.\u0275cmp=o.VBU({type:n,selectors:[["app-login"]],decls:23,vars:3,consts:[[1,"ion-padding"],["position","floating"],["type","email",3,"ngModelChange","ngModel"],["type","password",3,"ngModelChange","ngModel"],["expand","full",3,"click"],["expand","full","color","medium",3,"click"],["name","logo-google","slot","start"],["expand","full","fill","clear","routerLink","/register"],["color","danger",4,"ngIf"],["color","danger"]],template:function(e,r){1&e&&(o.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),o.EFF(3,"Iniciar Sesi\xf3n"),o.k0s()()(),o.j41(4,"ion-content",0)(5,"ion-card")(6,"ion-card-content")(7,"ion-item")(8,"ion-label",1),o.EFF(9,"Correo Electr\xf3nico"),o.k0s(),o.j41(10,"ion-input",2),o.mxI("ngModelChange",function(a){return o.DH7(r.email,a)||(r.email=a),a}),o.k0s()(),o.j41(11,"ion-item")(12,"ion-label",1),o.EFF(13,"Contrase\xf1a"),o.k0s(),o.j41(14,"ion-input",3),o.mxI("ngModelChange",function(a){return o.DH7(r.password,a)||(r.password=a),a}),o.k0s()(),o.j41(15,"ion-button",4),o.bIt("click",function(){return r.onLogin()}),o.EFF(16,"Iniciar Sesi\xf3n"),o.k0s(),o.j41(17,"ion-button",5),o.bIt("click",function(){return r.onGoogleLogin()}),o.nrm(18,"ion-icon",6),o.EFF(19," Iniciar sesi\xf3n con Google "),o.k0s(),o.j41(20,"ion-button",7),o.EFF(21,"Crear Cuenta"),o.k0s(),o.DNE(22,L,2,1,"ion-text",8),o.k0s()()()),2&e&&(o.R7$(10),o.R50("ngModel",r.email),o.R7$(4),o.R50("ngModel",r.password),o.R7$(8),o.Y8G("ngIf",r.errorMessage))},dependencies:[m.bT,c.BC,c.vS,i.Jm,i.b_,i.I9,i.W9,i.eU,i.iq,i.$w,i.uz,i.he,i.IO,i.BC,i.ai,i.Gw,i.N7,u.Wk]}),s})()}];let y=(()=>{var n;class s{}return(n=s).\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.$C({type:n}),n.\u0275inj=o.G2t({imports:[u.iI.forChild(P),u.iI]}),s})(),C=(()=>{var n;class s{}return(n=s).\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.$C({type:n}),n.\u0275inj=o.G2t({imports:[m.MD,c.YN,i.bv,y]}),s})()}}]);