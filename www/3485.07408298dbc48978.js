"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3485],{3485:(I,f,t)=>{t.r(f),t.d(f,{LoginPageModule:()=>k});var h=t(177),g=t(4341),i=t(4742),u=t(9384),d=t(467),m=t(4171),v=t(5312),p=t(7935),e=t(4438),L=t(4796),M=t(1182),P=t(6422);function F(n,s){if(1&n&&(e.j41(0,"ion-text",9),e.EFF(1),e.k0s()),2&n){const c=e.XpG();e.R7$(),e.JRh(c.errorMessage)}}const y=[{path:"",component:(()=>{var n;class s{constructor(o,r,l){this.authService=o,this.afAuth=r,this.firestore=l,this.email="",this.password="",this.errorMessage=""}onLogin(){var o=this;return(0,d.A)(function*(){try{yield o.afAuth.setPersistence(p.A.auth.Auth.Persistence.LOCAL),yield o.authService.loginUser(o.email,o.password),console.log("Inicio de sesi\xf3n exitoso");const r=yield o.afAuth.currentUser;r&&o.saveFcmToken(r.uid)}catch(r){console.error("Error al iniciar sesi\xf3n: ",r),o.errorMessage=o.getErrorMessage(r)}})()}onGoogleLogin(){var o=this;return(0,d.A)(function*(){try{yield o.afAuth.setPersistence(p.A.auth.Auth.Persistence.LOCAL),yield o.authService.loginWithGoogle(),console.log("Inicio de sesi\xf3n con Google exitoso")}catch(r){o.errorMessage=o.getErrorMessage(r)}})()}getErrorMessage(o){switch(o.code){case"auth/invalid-credential":return"Las credenciales proporcionadas no son v\xe1lidas. Por favor, verifica tu correo electr\xf3nico y contrase\xf1a.";case"auth/user-not-found":return"Usuario no encontrado. Por favor, registra una nueva cuenta.";case"auth/wrong-password":return"Contrase\xf1a incorrecta. Por favor, intenta de nuevo.";default:return"Ha ocurrido un error desconocido. Por favor, intenta de nuevo m\xe1s tarde."}}saveFcmToken(o){var r=this;return(0,d.A)(function*(){try{const l=(0,m.dG)(),a=yield(0,m.gf)(l,{vapidKey:v.c.vapidKey});a?(yield r.firestore.collection("usuarios").doc(o).update({fcmToken:a}),console.log("Token FCM guardado en Firestore")):console.log("No token available")}catch(l){console.error("Error obteniendo el token FCM: ",l)}})()}}return(n=s).\u0275fac=function(o){return new(o||n)(e.rXU(L.u),e.rXU(M.DS),e.rXU(P.Qe))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-login"]],decls:23,vars:3,consts:[[1,"ion-padding"],["position","floating"],["type","email",3,"ngModelChange","ngModel"],["type","password",3,"ngModelChange","ngModel"],["expand","full",3,"click"],["expand","full","color","medium",3,"click"],["name","logo-google","slot","start"],["expand","full","fill","clear","routerLink","/register"],["color","danger",4,"ngIf"],["color","danger"]],template:function(o,r){1&o&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Iniciar Sesi\xf3n"),e.k0s()()(),e.j41(4,"ion-content",0)(5,"ion-card")(6,"ion-card-content")(7,"ion-item")(8,"ion-label",1),e.EFF(9,"Correo Electr\xf3nico"),e.k0s(),e.j41(10,"ion-input",2),e.mxI("ngModelChange",function(a){return e.DH7(r.email,a)||(r.email=a),a}),e.k0s()(),e.j41(11,"ion-item")(12,"ion-label",1),e.EFF(13,"Contrase\xf1a"),e.k0s(),e.j41(14,"ion-input",3),e.mxI("ngModelChange",function(a){return e.DH7(r.password,a)||(r.password=a),a}),e.k0s()(),e.j41(15,"ion-button",4),e.bIt("click",function(){return r.onLogin()}),e.EFF(16,"Iniciar Sesi\xf3n"),e.k0s(),e.j41(17,"ion-button",5),e.bIt("click",function(){return r.onGoogleLogin()}),e.nrm(18,"ion-icon",6),e.EFF(19," Iniciar sesi\xf3n con Google "),e.k0s(),e.j41(20,"ion-button",7),e.EFF(21,"Crear Cuenta"),e.k0s(),e.DNE(22,F,2,1,"ion-text",8),e.k0s()()()),2&o&&(e.R7$(10),e.R50("ngModel",r.email),e.R7$(4),e.R50("ngModel",r.password),e.R7$(8),e.Y8G("ngIf",r.errorMessage))},dependencies:[h.bT,g.BC,g.vS,i.Jm,i.b_,i.I9,i.W9,i.eU,i.iq,i.$w,i.uz,i.he,i.IO,i.BC,i.ai,i.Gw,i.N7,u.Wk]}),s})()}];let C=(()=>{var n;class s{}return(n=s).\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[u.iI.forChild(y),u.iI]}),s})(),k=(()=>{var n;class s{}return(n=s).\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[h.MD,g.YN,i.bv,C]}),s})()}}]);