{"ast":null,"code":"import _asyncToGenerator from \"/home/jcanulao/Documentos/Miven1.0.0-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _AppComponent;\nimport { FirebaseMessaging } from '@capacitor-firebase/messaging';\nimport { getMessaging, onMessage } from \"firebase/messaging\";\nimport { Capacitor } from '@capacitor/core';\nimport { PushNotifications } from \"@capacitor/push-notifications\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"@angular/fire/compat/auth\";\nimport * as i3 from \"@angular/fire/compat/firestore\";\nimport * as i4 from \"./services/notifications-push.service\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/common\";\nconst _c0 = a0 => [a0];\nfunction AppComponent_ng_template_9_ng_template_0_ion_menu_toggle_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-menu-toggle\", 12)(1, \"ion-item\", 13);\n    i0.ɵɵelement(2, \"ion-icon\", 14);\n    i0.ɵɵelementStart(3, \"ion-label\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const sp_r1 = ctx.$implicit;\n    const p_r2 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(4, _c0, sp_r1.url));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ios\", p_r2.icon + \"-outline\")(\"md\", sp_r1.icon + \"-sharp\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(sp_r1.title);\n  }\n}\nfunction AppComponent_ng_template_9_ng_template_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-accordion-group\", 7)(1, \"ion-accordion\", 8)(2, \"ion-item\", 9)(3, \"ion-label\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"ion-list\", 10);\n    i0.ɵɵtemplate(6, AppComponent_ng_template_9_ng_template_0_ion_menu_toggle_6_Template, 5, 6, \"ion-menu-toggle\", 11);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const p_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", p_r2.title);\n    i0.ɵɵadvance();\n    i0.ɵɵpropertyInterpolate(\"value\", p_r2.title);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(p_r2.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", p_r2.items);\n  }\n}\nfunction AppComponent_ng_template_9_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-item\", 15);\n    i0.ɵɵlistener(\"click\", function AppComponent_ng_template_9_ng_template_1_Template_ion_item_click_0_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r3 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r3.closeMenu());\n    });\n    i0.ɵɵelement(1, \"ion-icon\", 16);\n    i0.ɵɵelementStart(2, \"ion-label\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const p_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(4, _c0, p_r2.url));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ios\", p_r2.icon + \"-outline\")(\"md\", p_r2.icon + \"-sharp\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r2.title);\n  }\n}\nfunction AppComponent_ng_template_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, AppComponent_ng_template_9_ng_template_0_Template, 7, 4, \"ng-template\", 6)(1, AppComponent_ng_template_9_ng_template_1_Template, 4, 6, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor);\n  }\n  if (rf & 2) {\n    const p_r2 = ctx.$implicit;\n    const sinItems_r5 = i0.ɵɵreference(2);\n    i0.ɵɵproperty(\"ngIf\", (p_r2.items == null ? null : p_r2.items.length) > 0)(\"ngIfElse\", sinItems_r5);\n  }\n}\nexport class AppComponent {\n  constructor(navCtrl, auth, firestore, platform, notificationsPushService, menuController, afAuth, router) {\n    this.navCtrl = navCtrl;\n    this.auth = auth;\n    this.firestore = firestore;\n    this.platform = platform;\n    this.notificationsPushService = notificationsPushService;\n    this.menuController = menuController;\n    this.afAuth = afAuth;\n    this.router = router;\n    this.userId = null;\n    this.appPages = [{\n      title: 'Inicio',\n      url: '/home',\n      icon: 'Home'\n    }, {\n      title: 'Inventario',\n      url: '/inventory',\n      icon: 'clipboard'\n    }, {\n      title: 'Favoritos',\n      url: '/favorites',\n      icon: 'heart'\n    }, {\n      title: 'Recetas',\n      icon: 'restaurant',\n      items: [{\n        title: 'Desayuno',\n        url: '/breakfast-recipes',\n        icon: 'restaurant'\n      }, {\n        title: 'Almuerzo',\n        url: '/lunch-recipes',\n        icon: 'restaurant'\n      }, {\n        title: 'Cena',\n        url: '/dinner-recipes',\n        icon: 'restaurant'\n      }, {\n        title: 'Postres',\n        url: '/dessert-recipes',\n        icon: 'restaurant'\n      }, {\n        title: 'Agregar recetas',\n        url: '/add-recipe',\n        icon: 'add'\n      }]\n    }, {\n      title: 'Perfil',\n      url: '/perfilusuario',\n      icon: 'person'\n    }, {\n      title: 'Cerrar sesión',\n      url: '/login',\n      icon: 'close'\n    }];\n    this.initializeFCM();\n    this.listenToMessages();\n    this.init();\n    this.initializeNotifications();\n  }\n  navigateToAlmuerzo() {\n    this.navCtrl.navigateForward('/almuerzo');\n  }\n  navigateToCena() {\n    this.navCtrl.navigateForward('/cena');\n  }\n  navigateToDesayunos() {\n    this.navCtrl.navigateForward('/desayunos');\n  }\n  navigateToPostres() {\n    this.navCtrl.navigateForward('/postres');\n  }\n  init() {\n    if (Capacitor.isNativePlatform()) {\n      this.notificationsPushService.init();\n    }\n  }\n  ngOnInit() {\n    this.afAuth.authState.subscribe(user => {\n      if (user) {\n        console.log('Usuario autenticado:', user);\n        this.router.navigate(['/home']); // Cambia '/home' por la ruta de tu página principal\n      } else {\n        console.log('No hay usuario autenticado.');\n        this.router.navigate(['/login']); // Cambia '/login' por tu ruta de inicio de sesión\n      }\n    });\n  }\n  initializeApp() {\n    this.platform.ready().then(() => {\n      this.requestNotificationPermission();\n      if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.register('/firebase-messaging-sw.js').then(registration => {\n          console.log('Service Worker registrado:', registration);\n        }).catch(error => {\n          console.log('Error al registrar el Service Worker:', error);\n        });\n      }\n    });\n  }\n  requestNotificationPermission() {\n    Notification.requestPermission().then(permission => {\n      if (permission === 'granted') {\n        console.log('Permiso para notificaciones concedido');\n      } else {\n        console.error('Permiso para notificaciones denegado');\n      }\n    });\n  }\n  listenToMessages() {\n    const messaging = getMessaging();\n    onMessage(messaging, payload => {\n      console.log('Mensaje recibido en primer plano: ', payload);\n      // Aquí puedes manejar cómo se mostrarán las notificaciones en la interfaz\n    });\n  }\n  initializeFCM() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      _this.auth.user.subscribe( /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(function* (user) {\n          if (user) {\n            _this.userId = user.uid;\n            const permission = yield FirebaseMessaging.requestPermissions();\n            if (permission.receive === 'granted') {\n              const token = yield FirebaseMessaging.getToken();\n              console.log('FCM Token:', token);\n              // Guardar el token FCM en Firestore para el usuario actual\n              _this.firestore.collection('usuarios').doc(_this.userId).set({\n                fcmToken: token\n              }, {\n                merge: true\n              });\n              // Escuchar notificaciones recibidas\n              FirebaseMessaging.addListener('notificationReceived', notification => {\n                console.log('Notificación recibida:', notification);\n                // Aquí puedes implementar lógica para mostrar la notificación\n              });\n              // Escuchar cuando se realiza una acción en la notificación\n              FirebaseMessaging.addListener('notificationActionPerformed', notification => {\n                console.log('Acción de notificación:', notification);\n                // Aquí puedes manejar la interacción con la notificación\n              });\n            } else {\n              console.log('Permisos de notificación denegados');\n            }\n          }\n        });\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    })();\n  }\n  closeMenu() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      yield _this2.menuController.close();\n    })();\n  }\n  initializeNotifications() {\n    PushNotifications.requestPermissions().then(permission => {\n      if (permission.receive === \"granted\") {\n        PushNotifications.register();\n      }\n    });\n    // Escucha notificaciones recibidas\n    PushNotifications.addListener(\"pushNotificationReceived\", notification => {\n      console.log(\"Notificación recibida:\", notification);\n    });\n    // Escucha acciones de notificaciones\n    PushNotifications.addListener(\"pushNotificationActionPerformed\", action => {\n      console.log(\"Acción de notificación realizada:\", action);\n    });\n  }\n}\n_AppComponent = AppComponent;\n_AppComponent.ɵfac = function AppComponent_Factory(__ngFactoryType__) {\n  return new (__ngFactoryType__ || _AppComponent)(i0.ɵɵdirectiveInject(i1.NavController), i0.ɵɵdirectiveInject(i2.AngularFireAuth), i0.ɵɵdirectiveInject(i3.AngularFirestore), i0.ɵɵdirectiveInject(i1.Platform), i0.ɵɵdirectiveInject(i4.NotificationsPushService), i0.ɵɵdirectiveInject(i1.MenuController), i0.ɵɵdirectiveInject(i2.AngularFireAuth), i0.ɵɵdirectiveInject(i5.Router));\n};\n_AppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _AppComponent,\n  selectors: [[\"app-root\"]],\n  decls: 11,\n  vars: 1,\n  consts: [[\"sinItems\", \"\"], [\"contentId\", \"main-content\"], [\"contentId\", \"main-content\", \"type\", \"overlay\"], [\"id\", \"inbox-list\"], [\"ngFor\", \"\", 3, \"ngForOf\"], [\"id\", \"main-content\"], [3, \"ngIf\", \"ngIfElse\"], [3, \"value\"], [\"toggle-icon\", \"arrow-down-circle\", 3, \"value\"], [\"slot\", \"header\"], [\"id\", \"inbox-list\", \"slot\", \"content\"], [\"auto-hide\", \"false\", 4, \"ngFor\", \"ngForOf\"], [\"auto-hide\", \"false\"], [\"routerDirection\", \"root\", \"lines\", \"none\", \"detail\", \"false\", \"routerLinkActive\", \"selected\", 3, \"routerLink\"], [\"slot\", \"start\", 3, \"ios\", \"md\"], [\"routerDirection\", \"root\", \"lines\", \"none\", \"detail\", \"false\", \"routerLinkActive\", \"selected\", 3, \"click\", \"routerLink\"], [\"aria-hidden\", \"true\", \"slot\", \"start\", 3, \"ios\", \"md\"]],\n  template: function AppComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-app\")(1, \"ion-split-pane\", 1)(2, \"ion-menu\", 2)(3, \"ion-content\")(4, \"ion-list\", 3)(5, \"ion-list-header\");\n      i0.ɵɵtext(6, \"Miven\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"ion-note\");\n      i0.ɵɵtext(8, \"V.1\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(9, AppComponent_ng_template_9_Template, 3, 2, \"ng-template\", 4);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelement(10, \"ion-router-outlet\", 5);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngForOf\", ctx.appPages);\n    }\n  },\n  dependencies: [i6.NgForOf, i6.NgIf, i1.IonAccordion, i1.IonAccordionGroup, i1.IonApp, i1.IonContent, i1.IonIcon, i1.IonItem, i1.IonLabel, i1.IonList, i1.IonListHeader, i1.IonMenu, i1.IonMenuToggle, i1.IonNote, i1.IonSplitPane, i1.IonRouterOutlet, i1.RouterLinkDelegate, i5.RouterLink, i5.RouterLinkActive],\n  styles: [\"ion-menu[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%] {\\n  --background: var(--ion-item-background, var(--ion-background-color, #fff));\\n}\\n\\nion-menu.md[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%] {\\n  --padding-start: 8px;\\n  --padding-end: 8px;\\n  --padding-top: 20px;\\n  --padding-bottom: 20px;\\n}\\n\\nion-menu.md[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%] {\\n  padding: 20px 0;\\n}\\n\\nion-menu.md[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%] {\\n  margin-bottom: 30px;\\n}\\n\\nion-menu.md[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%], \\nion-menu.md[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%] {\\n  padding-left: 10px;\\n}\\n\\nion-menu.md[_ngcontent-%COMP%]   ion-list#inbox-list[_ngcontent-%COMP%] {\\n  border-bottom: 1px solid var(--ion-background-color-step-150, #d7d8da);\\n}\\n\\nion-menu.md[_ngcontent-%COMP%]   ion-list#inbox-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%] {\\n  font-size: 22px;\\n  font-weight: 600;\\n  min-height: 20px;\\n}\\n\\nion-menu.md[_ngcontent-%COMP%]   ion-list#labels-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%] {\\n  font-size: 16px;\\n  margin-bottom: 18px;\\n  color: #757575;\\n  min-height: 26px;\\n}\\n\\nion-menu.md[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%] {\\n  --padding-start: 10px;\\n  --padding-end: 10px;\\n  border-radius: 4px;\\n}\\n\\nion-menu.md[_ngcontent-%COMP%]   ion-item.selected[_ngcontent-%COMP%] {\\n  --background: rgba(var(--ion-color-primary-rgb), 0.14);\\n}\\n\\nion-menu.md[_ngcontent-%COMP%]   ion-item.selected[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%] {\\n  color: var(--ion-color-primary);\\n}\\n\\nion-menu.md[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%] {\\n  color: #616e7e;\\n}\\n\\nion-menu.md[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%] {\\n  font-weight: 500;\\n}\\n\\nion-menu.ios[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%] {\\n  --padding-bottom: 20px;\\n}\\n\\nion-menu.ios[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%] {\\n  padding: 20px 0 0 0;\\n}\\n\\nion-menu.ios[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%] {\\n  line-height: 24px;\\n  margin-bottom: 20px;\\n}\\n\\nion-menu.ios[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%] {\\n  --padding-start: 16px;\\n  --padding-end: 16px;\\n  --min-height: 50px;\\n}\\n\\nion-menu.ios[_ngcontent-%COMP%]   ion-item.selected[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%] {\\n  color: var(--ion-color-primary);\\n}\\n\\nion-menu.ios[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%] {\\n  font-size: 24px;\\n  color: #73849a;\\n}\\n\\nion-menu.ios[_ngcontent-%COMP%]   ion-list#labels-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%] {\\n  margin-bottom: 8px;\\n}\\n\\nion-menu.ios[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%], \\nion-menu.ios[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%] {\\n  padding-left: 16px;\\n  padding-right: 16px;\\n}\\n\\nion-menu.ios[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%] {\\n  margin-bottom: 8px;\\n}\\n\\nion-note[_ngcontent-%COMP%] {\\n  display: inline-block;\\n  font-size: 16px;\\n  color: var(--ion-color-medium-shade);\\n}\\n\\nion-item.selected[_ngcontent-%COMP%] {\\n  --color: var(--ion-color-primary);\\n}\\n\\n[_ngcontent-%COMP%]:root {\\n  --ion-background-color: #ffffff;\\n  --ion-text-color: #000000;\\n}\\n\\n.dark-theme[_ngcontent-%COMP%] {\\n  --ion-background-color: #000000;\\n  --ion-text-color: #ffffff;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvYXBwLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsMkVBQUE7QUFDRjs7QUFFQTtFQUNFLG9CQUFBO0VBQ0Esa0JBQUE7RUFDQSxtQkFBQTtFQUNBLHNCQUFBO0FBQ0Y7O0FBRUE7RUFDRSxlQUFBO0FBQ0Y7O0FBRUE7RUFDRSxtQkFBQTtBQUNGOztBQUVBOztFQUVFLGtCQUFBO0FBQ0Y7O0FBRUE7RUFDRSxzRUFBQTtBQUNGOztBQUVBO0VBQ0UsZUFBQTtFQUNBLGdCQUFBO0VBRUEsZ0JBQUE7QUFBRjs7QUFHQTtFQUNFLGVBQUE7RUFFQSxtQkFBQTtFQUVBLGNBQUE7RUFFQSxnQkFBQTtBQUhGOztBQU1BO0VBQ0UscUJBQUE7RUFDQSxtQkFBQTtFQUNBLGtCQUFBO0FBSEY7O0FBTUE7RUFDRSxzREFBQTtBQUhGOztBQU1BO0VBQ0UsK0JBQUE7QUFIRjs7QUFNQTtFQUNFLGNBQUE7QUFIRjs7QUFNQTtFQUNFLGdCQUFBO0FBSEY7O0FBTUE7RUFDRSxzQkFBQTtBQUhGOztBQU1BO0VBQ0UsbUJBQUE7QUFIRjs7QUFNQTtFQUNFLGlCQUFBO0VBQ0EsbUJBQUE7QUFIRjs7QUFNQTtFQUNFLHFCQUFBO0VBQ0EsbUJBQUE7RUFDQSxrQkFBQTtBQUhGOztBQU1BO0VBQ0UsK0JBQUE7QUFIRjs7QUFNQTtFQUNFLGVBQUE7RUFDQSxjQUFBO0FBSEY7O0FBTUE7RUFDRSxrQkFBQTtBQUhGOztBQU1BOztFQUVFLGtCQUFBO0VBQ0EsbUJBQUE7QUFIRjs7QUFNQTtFQUNFLGtCQUFBO0FBSEY7O0FBTUE7RUFDRSxxQkFBQTtFQUNBLGVBQUE7RUFFQSxvQ0FBQTtBQUpGOztBQU9BO0VBQ0UsaUNBQUE7QUFKRjs7QUFNQTtFQUNFLCtCQUFBO0VBQ0EseUJBQUE7QUFIRjs7QUFNQTtFQUNFLCtCQUFBO0VBQ0EseUJBQUE7QUFIRiIsInNvdXJjZXNDb250ZW50IjpbImlvbi1tZW51IGlvbi1jb250ZW50IHtcbiAgLS1iYWNrZ3JvdW5kOiB2YXIoLS1pb24taXRlbS1iYWNrZ3JvdW5kLCB2YXIoLS1pb24tYmFja2dyb3VuZC1jb2xvciwgI2ZmZikpO1xufVxuXG5pb24tbWVudS5tZCBpb24tY29udGVudCB7XG4gIC0tcGFkZGluZy1zdGFydDogOHB4O1xuICAtLXBhZGRpbmctZW5kOiA4cHg7XG4gIC0tcGFkZGluZy10b3A6IDIwcHg7XG4gIC0tcGFkZGluZy1ib3R0b206IDIwcHg7XG59XG5cbmlvbi1tZW51Lm1kIGlvbi1saXN0IHtcbiAgcGFkZGluZzogMjBweCAwO1xufVxuXG5pb24tbWVudS5tZCBpb24tbm90ZSB7XG4gIG1hcmdpbi1ib3R0b206IDMwcHg7XG59XG5cbmlvbi1tZW51Lm1kIGlvbi1saXN0LWhlYWRlcixcbmlvbi1tZW51Lm1kIGlvbi1ub3RlIHtcbiAgcGFkZGluZy1sZWZ0OiAxMHB4O1xufVxuXG5pb24tbWVudS5tZCBpb24tbGlzdCNpbmJveC1saXN0IHtcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWlvbi1iYWNrZ3JvdW5kLWNvbG9yLXN0ZXAtMTUwLCAjZDdkOGRhKTtcbn1cblxuaW9uLW1lbnUubWQgaW9uLWxpc3QjaW5ib3gtbGlzdCBpb24tbGlzdC1oZWFkZXIge1xuICBmb250LXNpemU6IDIycHg7XG4gIGZvbnQtd2VpZ2h0OiA2MDA7XG5cbiAgbWluLWhlaWdodDogMjBweDtcbn1cblxuaW9uLW1lbnUubWQgaW9uLWxpc3QjbGFiZWxzLWxpc3QgaW9uLWxpc3QtaGVhZGVyIHtcbiAgZm9udC1zaXplOiAxNnB4O1xuXG4gIG1hcmdpbi1ib3R0b206IDE4cHg7XG5cbiAgY29sb3I6ICM3NTc1NzU7XG5cbiAgbWluLWhlaWdodDogMjZweDtcbn1cblxuaW9uLW1lbnUubWQgaW9uLWl0ZW0ge1xuICAtLXBhZGRpbmctc3RhcnQ6IDEwcHg7XG4gIC0tcGFkZGluZy1lbmQ6IDEwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDRweDtcbn1cblxuaW9uLW1lbnUubWQgaW9uLWl0ZW0uc2VsZWN0ZWQge1xuICAtLWJhY2tncm91bmQ6IHJnYmEodmFyKC0taW9uLWNvbG9yLXByaW1hcnktcmdiKSwgMC4xNCk7XG59XG5cbmlvbi1tZW51Lm1kIGlvbi1pdGVtLnNlbGVjdGVkIGlvbi1pY29uIHtcbiAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1wcmltYXJ5KTtcbn1cblxuaW9uLW1lbnUubWQgaW9uLWl0ZW0gaW9uLWljb24ge1xuICBjb2xvcjogIzYxNmU3ZTtcbn1cblxuaW9uLW1lbnUubWQgaW9uLWl0ZW0gaW9uLWxhYmVsIHtcbiAgZm9udC13ZWlnaHQ6IDUwMDtcbn1cblxuaW9uLW1lbnUuaW9zIGlvbi1jb250ZW50IHtcbiAgLS1wYWRkaW5nLWJvdHRvbTogMjBweDtcbn1cblxuaW9uLW1lbnUuaW9zIGlvbi1saXN0IHtcbiAgcGFkZGluZzogMjBweCAwIDAgMDtcbn1cblxuaW9uLW1lbnUuaW9zIGlvbi1ub3RlIHtcbiAgbGluZS1oZWlnaHQ6IDI0cHg7XG4gIG1hcmdpbi1ib3R0b206IDIwcHg7XG59XG5cbmlvbi1tZW51LmlvcyBpb24taXRlbSB7XG4gIC0tcGFkZGluZy1zdGFydDogMTZweDtcbiAgLS1wYWRkaW5nLWVuZDogMTZweDtcbiAgLS1taW4taGVpZ2h0OiA1MHB4O1xufVxuXG5pb24tbWVudS5pb3MgaW9uLWl0ZW0uc2VsZWN0ZWQgaW9uLWljb24ge1xuICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLXByaW1hcnkpO1xufVxuXG5pb24tbWVudS5pb3MgaW9uLWl0ZW0gaW9uLWljb24ge1xuICBmb250LXNpemU6IDI0cHg7XG4gIGNvbG9yOiAjNzM4NDlhO1xufVxuXG5pb24tbWVudS5pb3MgaW9uLWxpc3QjbGFiZWxzLWxpc3QgaW9uLWxpc3QtaGVhZGVyIHtcbiAgbWFyZ2luLWJvdHRvbTogOHB4O1xufVxuXG5pb24tbWVudS5pb3MgaW9uLWxpc3QtaGVhZGVyLFxuaW9uLW1lbnUuaW9zIGlvbi1ub3RlIHtcbiAgcGFkZGluZy1sZWZ0OiAxNnB4O1xuICBwYWRkaW5nLXJpZ2h0OiAxNnB4O1xufVxuXG5pb24tbWVudS5pb3MgaW9uLW5vdGUge1xuICBtYXJnaW4tYm90dG9tOiA4cHg7XG59XG5cbmlvbi1ub3RlIHtcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICBmb250LXNpemU6IDE2cHg7XG5cbiAgY29sb3I6IHZhcigtLWlvbi1jb2xvci1tZWRpdW0tc2hhZGUpO1xufVxuXG5pb24taXRlbS5zZWxlY3RlZCB7XG4gIC0tY29sb3I6IHZhcigtLWlvbi1jb2xvci1wcmltYXJ5KTtcbn1cbjpyb290IHtcbiAgLS1pb24tYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjtcbiAgLS1pb24tdGV4dC1jb2xvcjogIzAwMDAwMDtcbn1cblxuLmRhcmstdGhlbWUge1xuICAtLWlvbi1iYWNrZ3JvdW5kLWNvbG9yOiAjMDAwMDAwO1xuICAtLWlvbi10ZXh0LWNvbG9yOiAjZmZmZmZmO1xufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"names":["FirebaseMessaging","getMessaging","onMessage","Capacitor","PushNotifications","i0","ɵɵelementStart","ɵɵelement","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","ɵɵpureFunction1","_c0","sp_r1","url","p_r2","icon","ɵɵtextInterpolate","title","ɵɵtemplate","AppComponent_ng_template_9_ng_template_0_ion_menu_toggle_6_Template","ɵɵpropertyInterpolate","items","ɵɵlistener","AppComponent_ng_template_9_ng_template_1_Template_ion_item_click_0_listener","ɵɵrestoreView","_r3","ctx_r3","ɵɵnextContext","ɵɵresetView","closeMenu","AppComponent_ng_template_9_ng_template_0_Template","AppComponent_ng_template_9_ng_template_1_Template","ɵɵtemplateRefExtractor","length","sinItems_r5","AppComponent","constructor","navCtrl","auth","firestore","platform","notificationsPushService","menuController","afAuth","router","userId","appPages","initializeFCM","listenToMessages","init","initializeNotifications","navigateToAlmuerzo","navigateForward","navigateToCena","navigateToDesayunos","navigateToPostres","isNativePlatform","ngOnInit","authState","subscribe","user","console","log","navigate","initializeApp","ready","then","requestNotificationPermission","navigator","serviceWorker","register","registration","catch","error","Notification","requestPermission","permission","messaging","payload","_this","_asyncToGenerator","_ref","uid","requestPermissions","receive","token","getToken","collection","doc","set","fcmToken","merge","addListener","notification","_x","apply","arguments","_this2","close","action","ɵɵdirectiveInject","i1","NavController","i2","AngularFireAuth","i3","AngularFirestore","Platform","i4","NotificationsPushService","MenuController","i5","Router","selectors","decls","vars","consts","template","AppComponent_Template","rf","ctx","AppComponent_ng_template_9_Template"],"sources":["/home/jcanulao/Documentos/Miven1.0.0-main/src/app/app.component.ts","/home/jcanulao/Documentos/Miven1.0.0-main/src/app/app.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { NavController } from '@ionic/angular';  // Importar NavController\nimport { FirebaseMessaging } from '@capacitor-firebase/messaging';\nimport { AngularFirestore } from '@angular/fire/compat/firestore';\nimport { AngularFireAuth } from '@angular/fire/compat/auth';\nimport { getMessaging, onMessage } from \"firebase/messaging\";\nimport { Platform } from '@ionic/angular';\nimport { NotificationsPushService } from './services/notifications-push.service';\nimport { Capacitor } from '@capacitor/core';\nimport { MenuController } from '@ionic/angular';\nimport { PushNotifications } from \"@capacitor/push-notifications\";\nimport { Router } from '@angular/router';\n\n\n@Component({\n  selector: 'app-root',\n  templateUrl: 'app.component.html',\n  styleUrls: ['app.component.scss'],\n})\nexport class AppComponent implements OnInit {\n  userId: string | null = null;\n  public appPages: any = [\n    { title: 'Inicio', url: '/home', icon: 'Home' },\n    { title: 'Inventario', url: '/inventory', icon: 'clipboard' },\n    { title: 'Favoritos', url: '/favorites', icon: 'heart' },\n    { title: 'Recetas', icon: 'restaurant',\n      items: [\n        {title: 'Desayuno', url: '/breakfast-recipes', icon: 'restaurant'},\n        {title: 'Almuerzo', url: '/lunch-recipes', icon: 'restaurant'},\n        {title: 'Cena', url: '/dinner-recipes', icon: 'restaurant'},\n        {title: 'Postres', url: '/dessert-recipes', icon: 'restaurant'},\n        {title: 'Agregar recetas', url: '/add-recipe', icon: 'add'},\n      ]\n     },\n     { title: 'Perfil', url: '/perfilusuario', icon: 'person' },\n    { title: 'Cerrar sesión', url: '/login', icon: 'close' },\n  ];\n\n  constructor(\n    private navCtrl: NavController,\n    private auth: AngularFireAuth, \n    private firestore: AngularFirestore,\n    private platform: Platform,\n    private notificationsPushService: NotificationsPushService,\n    private menuController: MenuController,\n    private afAuth: AngularFireAuth, private router: Router\n  ) {\n    this.initializeFCM();\n    this.listenToMessages();\n    this.init();\n    this.initializeNotifications();\n    \n  }\n  navigateToAlmuerzo() {\n    this.navCtrl.navigateForward('/almuerzo');\n  }\n\n  navigateToCena() {\n    this.navCtrl.navigateForward('/cena');\n  }\n\n  navigateToDesayunos() {\n    this.navCtrl.navigateForward('/desayunos');\n  }\n\n  navigateToPostres() {\n    this.navCtrl.navigateForward('/postres');\n  }\n\ninit() {\n  if (Capacitor.isNativePlatform()) { \n\n    this.notificationsPushService.init();\n  }\n\n}\n\nngOnInit() {\n  this.afAuth.authState.subscribe((user) => {\n    if (user) {\n      console.log('Usuario autenticado:', user);\n      this.router.navigate(['/home']); // Cambia '/home' por la ruta de tu página principal\n    } else {\n      console.log('No hay usuario autenticado.');\n      this.router.navigate(['/login']); // Cambia '/login' por tu ruta de inicio de sesión\n    }\n  });\n}\n\n\n  initializeApp() {\n    this.platform.ready().then(() => {\n      this.requestNotificationPermission();\n\n      if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.register('/firebase-messaging-sw.js')\n          .then((registration) => {\n            console.log('Service Worker registrado:', registration);\n          }).catch((error) => {\n            console.log('Error al registrar el Service Worker:', error);\n          });\n      }\n \n\n    });\n}\n\n\n  requestNotificationPermission() {\n    Notification.requestPermission().then(permission => {\n      if (permission === 'granted') {\n        console.log('Permiso para notificaciones concedido');\n      } else {\n        console.error('Permiso para notificaciones denegado');\n      }\n    });\n  }\n\n  listenToMessages() {\n    const messaging = getMessaging();\n    onMessage(messaging, (payload) => {\n      console.log('Mensaje recibido en primer plano: ', payload);\n      // Aquí puedes manejar cómo se mostrarán las notificaciones en la interfaz\n    });\n  }\n\n\n\n\n  async initializeFCM() {\n    this.auth.user.subscribe(async (user) => {\n      if (user) {\n        this.userId = user.uid;\n\n        const permission = await FirebaseMessaging.requestPermissions();\n        if (permission.receive === 'granted') {\n          const token = await FirebaseMessaging.getToken();\n          console.log('FCM Token:', token);\n\n          // Guardar el token FCM en Firestore para el usuario actual\n          this.firestore.collection('usuarios').doc(this.userId).set(\n            { fcmToken: token }, { merge: true }\n          );\n\n          // Escuchar notificaciones recibidas\n          FirebaseMessaging.addListener('notificationReceived', (notification: any) => {\n            console.log('Notificación recibida:', notification);\n            // Aquí puedes implementar lógica para mostrar la notificación\n          });\n\n          // Escuchar cuando se realiza una acción en la notificación\n          FirebaseMessaging.addListener('notificationActionPerformed', (notification: any) => {\n            console.log('Acción de notificación:', notification);\n            // Aquí puedes manejar la interacción con la notificación\n          });\n        } else {\n          console.log('Permisos de notificación denegados');\n        }\n      }\n    });\n  }\n\n  async closeMenu() {\n    await this.menuController.close();\n  }\n\n  initializeNotifications() {\n    PushNotifications.requestPermissions().then((permission) => {\n      if (permission.receive === \"granted\") {\n        PushNotifications.register();\n      }\n    });\n\n    // Escucha notificaciones recibidas\n    PushNotifications.addListener(\"pushNotificationReceived\", (notification) => {\n      console.log(\"Notificación recibida:\", notification);\n    });\n\n    // Escucha acciones de notificaciones\n    PushNotifications.addListener(\"pushNotificationActionPerformed\", (action) => {\n      console.log(\"Acción de notificación realizada:\", action);\n    });\n  }\n\n}\n","<ion-app>\n  <ion-split-pane contentId=\"main-content\">\n    <ion-menu contentId=\"main-content\" type=\"overlay\">\n      <ion-content>\n        <ion-list id=\"inbox-list\">\n          <ion-list-header>Miven</ion-list-header>\n          <ion-note>V.1</ion-note>\n          <ng-template ngFor let-i=\"index\" let-p [ngForOf]=\"appPages\">\n\n            <ng-template [ngIf]=\"p.items?.length > 0\" [ngIfElse]=\"sinItems\">\n              \n              <ion-accordion-group value=\"{{p.title}}\">\n                <ion-accordion value=\"{{p.title}}\" toggle-icon=\"arrow-down-circle\">\n                  <ion-item slot=\"header\">\n                    <ion-label>{{p.title}}</ion-label>\n                  </ion-item>\n      \n                  <ion-list id=\"inbox-list\" slot=\"content\" >\n                    <ion-menu-toggle auto-hide=\"false\" *ngFor=\"let sp of p.items; let i = index\">\n                      <ion-item routerDirection=\"root\" [routerLink]=\"[sp.url]\" lines=\"none\" detail=\"false\"\n                      routerLinkActive=\"selected\">\n                      <ion-icon slot=\"start\" [ios]=\"p.icon + '-outline'\" [md]=\"sp.icon + '-sharp'\"></ion-icon>\n                      <ion-label>{{ sp.title }}</ion-label>\n                    </ion-item>\n                    </ion-menu-toggle>\n                  </ion-list>\n                </ion-accordion>\n              </ion-accordion-group>\n\n            </ng-template>\n            <ng-template #sinItems>\n              <ion-item (click)=\"closeMenu()\" routerDirection=\"root\" [routerLink]=\"[p.url]\" lines=\"none\" detail=\"false\" routerLinkActive=\"selected\">\n                <ion-icon aria-hidden=\"true\" slot=\"start\" [ios]=\"p.icon + '-outline'\" [md]=\"p.icon + '-sharp'\"></ion-icon>\n                <ion-label>{{ p.title }}</ion-label>\n              </ion-item>               \n            </ng-template>\n        </ng-template>\n       </ion-list>\n      </ion-content>\n    </ion-menu>\n    <ion-router-outlet id=\"main-content\"></ion-router-outlet>\n  </ion-split-pane>\n</ion-app>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}