{"ast":null,"code":"var _DessertRecipesComponent;\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/recipe.service\";\nimport * as i2 from \"../../services/inventory.service\";\nimport * as i3 from \"@angular/fire/compat/auth\";\nimport * as i4 from \"@angular/fire/compat/firestore\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"../../shared/services/unit-conversion.service\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"@ionic/angular\";\nimport * as i9 from \"@angular/forms\";\nconst _c0 = () => [1, 2, 3, 4, 5];\nfunction DessertRecipesComponent_ion_card_9_ion_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 12);\n    i0.ɵɵlistener(\"click\", function DessertRecipesComponent_ion_card_9_ion_button_1_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const recipe_r2 = i0.ɵɵnextContext().$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.deleteRecipe(recipe_r2.id));\n    });\n    i0.ɵɵtext(1, \" x \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DessertRecipesComponent_ion_card_9_ion_img_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-img\", 13);\n  }\n  if (rf & 2) {\n    const recipe_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"src\", recipe_r2.imageUrl);\n  }\n}\nfunction DessertRecipesComponent_ion_card_9_ion_icon_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-icon\", 14);\n  }\n  if (rf & 2) {\n    const star_r5 = ctx.$implicit;\n    const recipe_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"name\", star_r5 <= recipe_r2.calificacionPromedio ? \"star\" : \"star-outline\");\n  }\n}\nfunction DessertRecipesComponent_ion_card_9_ion_button_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 15);\n    i0.ɵɵlistener(\"click\", function DessertRecipesComponent_ion_card_9_ion_button_13_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const recipe_r2 = i0.ɵɵnextContext().$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.navigateToEdit(recipe_r2.id));\n    });\n    i0.ɵɵtext(1, \" Editar \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DessertRecipesComponent_ion_card_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-card\", 4);\n    i0.ɵɵlistener(\"click\", function DessertRecipesComponent_ion_card_9_Template_ion_card_click_0_listener() {\n      const recipe_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.openRecipeModal(recipe_r2));\n    });\n    i0.ɵɵtemplate(1, DessertRecipesComponent_ion_card_9_ion_button_1_Template, 2, 0, \"ion-button\", 5)(2, DessertRecipesComponent_ion_card_9_ion_img_2_Template, 1, 1, \"ion-img\", 6);\n    i0.ɵɵelementStart(3, \"div\", 7);\n    i0.ɵɵtemplate(4, DessertRecipesComponent_ion_card_9_ion_icon_4_Template, 1, 1, \"ion-icon\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"ion-card-header\")(6, \"ion-card-title\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"ion-card-content\");\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"slice\");\n    i0.ɵɵelementStart(11, \"ion-button\", 9);\n    i0.ɵɵlistener(\"click\", function DessertRecipesComponent_ion_card_9_Template_ion_button_click_11_listener() {\n      const recipe_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.openRecipeModal(recipe_r2));\n    });\n    i0.ɵɵtext(12, \"Ver m\\u00E1s\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(13, DessertRecipesComponent_ion_card_9_ion_button_13_Template, 2, 0, \"ion-button\", 10);\n    i0.ɵɵelementStart(14, \"ion-button\", 9);\n    i0.ɵɵlistener(\"click\", function DessertRecipesComponent_ion_card_9_Template_ion_button_click_14_listener() {\n      const recipe_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.addToFavorites(recipe_r2.id, recipe_r2.categoria));\n    });\n    i0.ɵɵelement(15, \"ion-icon\", 11);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const recipe_r2 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", recipe_r2.creadorId === ctx_r2.userId);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", recipe_r2.imageUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpureFunction0(12, _c0));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(recipe_r2.titulo);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind3(10, 8, recipe_r2.descripcion, 0, 100), \"... \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.userId === recipe_r2.creadorId);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"name\", ctx_r2.isFavorite(recipe_r2.id) ? \"heart\" : \"heart-outline\")(\"color\", ctx_r2.isFavorite(recipe_r2.id) ? \"danger\" : \"medium\");\n  }\n}\nfunction DessertRecipesComponent_ng_template_11_ion_img_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-img\", 13);\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"src\", ctx_r2.selectedRecipe == null ? null : ctx_r2.selectedRecipe.imageUrl);\n  }\n}\nfunction DessertRecipesComponent_ng_template_11_ion_item_14_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 25);\n    i0.ɵɵtext(1, \"Disponible\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DessertRecipesComponent_ng_template_11_ion_item_14_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 26);\n    i0.ɵɵtext(1, \"No disponible\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction DessertRecipesComponent_ng_template_11_ion_item_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\")(1, \"ion-label\");\n    i0.ɵɵtext(2);\n    i0.ɵɵtemplate(3, DessertRecipesComponent_ng_template_11_ion_item_14_span_3_Template, 2, 0, \"span\", 23)(4, DessertRecipesComponent_ng_template_11_ion_item_14_span_4_Template, 2, 0, \"span\", 24);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ing_r8 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate3(\" \", ing_r8.nombre, \" - \", ing_r8.cantidad, \" \", ing_r8.unidad, \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ing_r8.disponible);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ing_r8.disponible);\n  }\n}\nfunction DessertRecipesComponent_ng_template_11_ion_item_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\")(1, \"ion-label\")(2, \"h3\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\");\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"date\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const comentarios_r9 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(comentarios_r9.comment);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Calificaci\\u00F3n promedio: \", i0.ɵɵpipeBind2(6, 3, ctx_r2.selectedRecipe.averageRating, \"1.1-1\"), \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Fecha: \", i0.ɵɵpipeBind1(9, 6, comentarios_r9.timestamp), \"\");\n  }\n}\nfunction DessertRecipesComponent_ng_template_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-title\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"ion-buttons\", 16)(5, \"ion-button\", 4);\n    i0.ɵɵlistener(\"click\", function DessertRecipesComponent_ng_template_11_Template_ion_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.closeModal());\n    });\n    i0.ɵɵtext(6, \"Cerrar\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(7, \"ion-content\");\n    i0.ɵɵtemplate(8, DessertRecipesComponent_ng_template_11_ion_img_8_Template, 1, 1, \"ion-img\", 6);\n    i0.ɵɵelementStart(9, \"ion-list\")(10, \"ion-item\")(11, \"ion-label\")(12, \"h2\");\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(14, DessertRecipesComponent_ng_template_11_ion_item_14_Template, 5, 5, \"ion-item\", 17);\n    i0.ɵɵelementStart(15, \"ion-item\")(16, \"ion-label\")(17, \"h2\");\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(19, DessertRecipesComponent_ng_template_11_ion_item_19_Template, 10, 8, \"ion-item\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"ion-item\")(21, \"ion-label\", 18);\n    i0.ɵɵtext(22, \"Escribe tu comentario\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"ion-textarea\", 19);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function DessertRecipesComponent_ng_template_11_Template_ion_textarea_ngModelChange_23_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r2 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r2.newComment, $event) || (ctx_r2.newComment = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(24, \"ion-item\")(25, \"ion-label\");\n    i0.ɵɵtext(26, \"Califica esta receta\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"ion-range\", 20);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function DessertRecipesComponent_ng_template_11_Template_ion_range_ngModelChange_27_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r2 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r2.newRating, $event) || (ctx_r2.newRating = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelement(28, \"ion-icon\", 21)(29, \"ion-icon\", 22);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(30, \"ion-button\", 4);\n    i0.ɵɵlistener(\"click\", function DessertRecipesComponent_ng_template_11_Template_ion_button_click_30_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.submitComment());\n    });\n    i0.ɵɵtext(31, \"Enviar\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(32, \"ion-button\", 4);\n    i0.ɵɵlistener(\"click\", function DessertRecipesComponent_ng_template_11_Template_ion_button_click_32_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.closeModal());\n    });\n    i0.ɵɵtext(33, \"Cerrar\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r2.selectedRecipe == null ? null : ctx_r2.selectedRecipe.titulo);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.selectedRecipe == null ? null : ctx_r2.selectedRecipe.imageUrl);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r2.selectedRecipe == null ? null : ctx_r2.selectedRecipe.titulo);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.availableIngredients);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r2.selectedRecipe == null ? null : ctx_r2.selectedRecipe.descripcion);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.selectedRecipe == null ? null : ctx_r2.selectedRecipe.comentarios);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r2.newComment);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r2.newRating);\n  }\n}\nexport class DessertRecipesComponent {\n  constructor(recipeService, inventoryService, auth, firestore, router,\n  // Agregar el servicio Router\n  unitConversionService) {\n    this.recipeService = recipeService;\n    this.inventoryService = inventoryService;\n    this.auth = auth;\n    this.firestore = firestore;\n    this.router = router;\n    this.unitConversionService = unitConversionService;\n    this.dessertRecipes = [];\n    this.filteredDessertRecipes = [];\n    this.isModalOpen = false;\n    this.selectedRecipe = null;\n    this.userId = null;\n    this.availableIngredients = [];\n    this.newComment = '';\n    this.newRating = 1;\n    this.favorites = [];\n  }\n  ngOnInit() {\n    this.auth.user.subscribe(user => {\n      if (user) {\n        this.userId = user.uid;\n        this.loadFavorites();\n      }\n    });\n    this.loadDessertRecipes();\n  }\n  loadDessertRecipes() {\n    this.recipeService.getRecipesByCategory('postre').subscribe(recipes => {\n      this.dessertRecipes = recipes;\n      this.filteredDessertRecipes = recipes;\n      const ratingPromises = this.dessertRecipes.map(recipe => this.loadRecipeRatings(recipe.id).then(averageRating => {\n        recipe.averageRating = averageRating;\n      }));\n      Promise.all(ratingPromises).then(() => {\n        // Ordenar recetas por calificación promedio\n        this.sortRecipesByRating();\n      });\n    });\n  }\n  sortRecipesByRating() {\n    this.filteredDessertRecipes.sort((a, b) => {\n      return (b.averageRating || 0) - (a.averageRating || 0);\n    });\n  }\n  onSearch(event) {\n    var _event$target$value;\n    const searchTerm = ((_event$target$value = event.target.value) === null || _event$target$value === void 0 ? void 0 : _event$target$value.toLowerCase()) || '';\n    if (!searchTerm) {\n      this.filteredDessertRecipes = this.dessertRecipes;\n    } else {\n      this.filteredDessertRecipes = this.dessertRecipes.filter(recipe => recipe.titulo.toLowerCase().includes(searchTerm));\n    }\n  }\n  openRecipeModal(recipe) {\n    this.selectedRecipe = recipe;\n    this.checkIngredientsAvailability(recipe.ingredientes);\n    this.recipeService.getRecipeCommentsWithUser(recipe.id).subscribe(comments => {\n      this.selectedRecipe.comentarios = comments;\n    });\n    this.isModalOpen = true;\n  }\n  closeModal() {\n    this.isModalOpen = false;\n    this.selectedRecipe = null;\n  }\n  // Verificar la disponibilidad de los ingredientes en el inventario\n  checkIngredientsAvailability(recipeIngredients) {\n    const validUnits = ['gramos', 'ml', 'tazas', 'onzas'];\n    if (this.userId) {\n      this.inventoryService.getInventory(this.userId).subscribe(inventory => {\n        this.availableIngredients = recipeIngredients.map(ingredient => {\n          const inventoryItem = inventory.find(item => {\n            var _item$nombre, _ingredient$nombre;\n            return (item === null || item === void 0 || (_item$nombre = item.nombre) === null || _item$nombre === void 0 ? void 0 : _item$nombre.toLowerCase()) === (ingredient === null || ingredient === void 0 || (_ingredient$nombre = ingredient.nombre) === null || _ingredient$nombre === void 0 ? void 0 : _ingredient$nombre.toLowerCase());\n          });\n          if (inventoryItem) {\n            try {\n              const normalizedIngredientUnit = this.normalizeUnit(ingredient.unidad);\n              const normalizedInventoryUnit = this.normalizeUnit(inventoryItem.unidadMedida);\n              console.log(`Normalizando unidades: Ingrediente (${ingredient.unidad}) -> ${normalizedIngredientUnit}, Inventario (${inventoryItem.unidadMedida}) -> ${normalizedInventoryUnit}`);\n              if (!validUnits.includes(normalizedIngredientUnit) || !validUnits.includes(normalizedInventoryUnit)) {\n                throw new Error(`Unidad no válida: ${ingredient.unidad} o ${inventoryItem.unidadMedida}`);\n              }\n              const cantidadConvertida = this.inventoryService.convertirUnidad(ingredient.cantidad, normalizedIngredientUnit, normalizedInventoryUnit);\n              console.log(`Convirtiendo: ${ingredient.cantidad} ${normalizedIngredientUnit} a ${normalizedInventoryUnit}, Resultado: ${cantidadConvertida}`);\n              console.log(`Verificando cantidad: Inventario (${inventoryItem.cantidad} ${inventoryItem.unidadMedida}), Necesario (${cantidadConvertida} ${inventoryItem.unidadMedida})`);\n              const disponible = inventoryItem.cantidad >= cantidadConvertida;\n              return {\n                nombre: ingredient.nombre,\n                cantidad: ingredient.cantidad,\n                unidad: ingredient.unidad,\n                disponible\n              };\n            } catch (error) {\n              console.error(`Error al convertir ${ingredient.nombre}:`, error);\n              return {\n                nombre: ingredient.nombre,\n                cantidad: ingredient.cantidad,\n                unidad: ingredient.unidad,\n                disponible: false\n              };\n            }\n          } else {\n            return {\n              nombre: ingredient.nombre,\n              cantidad: ingredient.cantidad,\n              unidad: ingredient.unidad,\n              disponible: false\n            };\n          }\n        });\n      });\n    }\n  }\n  normalizeUnit(unit) {\n    switch (unit.toLowerCase()) {\n      case 'ml':\n        return 'ml';\n      case 'tazas':\n        return 'tazas';\n      case 'onzas':\n        return 'onzas';\n      case 'gramos':\n        return 'gramos';\n      default:\n        throw new Error(`Unidad no válida: ${unit}`);\n    }\n  }\n  rateRecipe(rating) {\n    this.newRating = rating;\n  }\n  submitComment() {\n    if (this.selectedRecipe && this.userId && this.newComment.trim()) {\n      this.recipeService.addCommentWithRating(this.selectedRecipe.id, this.userId, this.newRating, this.newComment).then(() => {\n        console.log('Comentario y calificación enviados');\n        this.newComment = '';\n        this.newRating = 1;\n        this.closeModal();\n      }).catch(error => {\n        console.error('Error al enviar el comentario:', error);\n      });\n    } else {\n      console.error('Faltan datos para enviar el comentario o el usuario no está autenticado');\n    }\n  }\n  loadRecipeRatings(recipeId) {\n    return new Promise(resolve => {\n      this.firestore.collection('recetas').doc(recipeId).collection('comentarios').valueChanges().subscribe(comments => {\n        if (comments.length > 0) {\n          const totalRating = comments.reduce((acc, comment) => acc + comment.rating, 0);\n          const averageRating = totalRating / comments.length;\n          resolve(averageRating);\n        } else {\n          resolve(0); // Sin calificaciones\n        }\n      });\n    });\n  }\n  deleteRecipe(recipeId) {\n    if (confirm('¿Estás seguro de que deseas eliminar esta receta?')) {\n      this.recipeService.deleteRecipe(recipeId).then(() => {\n        console.log('Receta eliminada con éxito');\n        this.loadDessertRecipes();\n      }).catch(error => {\n        console.error('Error al eliminar la receta:', error);\n      });\n    }\n  }\n  loadFavorites() {\n    if (!this.userId) return;\n    this.firestore.collection('usuarios').doc(this.userId).collection('favoritos').valueChanges().subscribe(favorites => {\n      this.favorites = favorites;\n    });\n  }\n  addToFavorites(recipeId, category) {\n    if (this.userId) {\n      if (this.isFavorite(recipeId)) {\n        console.log('La receta ya está en favoritos');\n        return;\n      }\n      const favoriteRecipe = {\n        recipeId: recipeId,\n        category: category,\n        userId: this.userId\n      };\n      this.firestore.collection('usuarios').doc(this.userId).collection('favoritos').add(favoriteRecipe).then(() => {\n        console.log('Receta agregada a favoritos');\n      }).catch(error => {\n        console.error('Error al agregar a favoritos:', error);\n      });\n    }\n  }\n  isFavorite(recipeId) {\n    return this.favorites.some(fav => fav.recipeId === recipeId);\n  }\n  navigateToEdit(recipeId) {\n    // Navegar a la página de edición de recetas\n    this.router.navigate(['/edit-recipe', recipeId]);\n  }\n}\n_DessertRecipesComponent = DessertRecipesComponent;\n_DessertRecipesComponent.ɵfac = function DessertRecipesComponent_Factory(__ngFactoryType__) {\n  return new (__ngFactoryType__ || _DessertRecipesComponent)(i0.ɵɵdirectiveInject(i1.RecipeService), i0.ɵɵdirectiveInject(i2.InventoryService), i0.ɵɵdirectiveInject(i3.AngularFireAuth), i0.ɵɵdirectiveInject(i4.AngularFirestore), i0.ɵɵdirectiveInject(i5.Router), i0.ɵɵdirectiveInject(i6.UnitConversionService));\n};\n_DessertRecipesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _DessertRecipesComponent,\n  selectors: [[\"app-dessert-recipes\"]],\n  decls: 12,\n  vars: 2,\n  consts: [[\"slot\", \"start\"], [\"placeholder\", \"Buscar receta\", 3, \"ionInput\"], [3, \"click\", 4, \"ngFor\", \"ngForOf\"], [3, \"didDismiss\", \"isOpen\"], [3, \"click\"], [\"class\", \"delete-button\", \"color\", \"danger\", 3, \"click\", 4, \"ngIf\"], [\"alt\", \"Imagen de la receta\", 3, \"src\", 4, \"ngIf\"], [1, \"star-rating\"], [3, \"name\", 4, \"ngFor\", \"ngForOf\"], [\"fill\", \"clear\", 3, \"click\"], [\"color\", \"primary\", 3, \"click\", 4, \"ngIf\"], [3, \"name\", \"color\"], [\"color\", \"danger\", 1, \"delete-button\", 3, \"click\"], [\"alt\", \"Imagen de la receta\", 3, \"src\"], [3, \"name\"], [\"color\", \"primary\", 3, \"click\"], [\"slot\", \"end\"], [4, \"ngFor\", \"ngForOf\"], [\"position\", \"floating\"], [3, \"ngModelChange\", \"ngModel\"], [\"min\", \"1\", \"max\", \"5\", \"step\", \"1\", \"snaps\", \"true\", 3, \"ngModelChange\", \"ngModel\"], [\"slot\", \"start\", \"name\", \"star-outline\"], [\"slot\", \"end\", \"name\", \"star\"], [\"style\", \"color: green;\", 4, \"ngIf\"], [\"style\", \"color: red;\", 4, \"ngIf\"], [2, \"color\", \"green\"], [2, \"color\", \"red\"]],\n  template: function DessertRecipesComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-buttons\", 0);\n      i0.ɵɵelement(3, \"ion-menu-button\");\n      i0.ɵɵelementStart(4, \"ion-title\");\n      i0.ɵɵtext(5, \"Recetas de Postre\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(6, \"ion-content\")(7, \"ion-searchbar\", 1);\n      i0.ɵɵlistener(\"ionInput\", function DessertRecipesComponent_Template_ion_searchbar_ionInput_7_listener($event) {\n        return ctx.onSearch($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"ion-list\");\n      i0.ɵɵtemplate(9, DessertRecipesComponent_ion_card_9_Template, 16, 13, \"ion-card\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"ion-modal\", 3);\n      i0.ɵɵlistener(\"didDismiss\", function DessertRecipesComponent_Template_ion_modal_didDismiss_10_listener() {\n        return ctx.closeModal();\n      });\n      i0.ɵɵtemplate(11, DessertRecipesComponent_ng_template_11_Template, 34, 8, \"ng-template\");\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngForOf\", ctx.filteredDessertRecipes);\n      i0.ɵɵadvance();\n      i0.ɵɵproperty(\"isOpen\", ctx.isModalOpen);\n    }\n  },\n  dependencies: [i7.NgForOf, i7.NgIf, i8.IonButton, i8.IonButtons, i8.IonCard, i8.IonCardContent, i8.IonCardHeader, i8.IonCardTitle, i8.IonContent, i8.IonHeader, i8.IonIcon, i8.IonImg, i8.IonItem, i8.IonLabel, i8.IonList, i8.IonMenuButton, i8.IonRange, i8.IonSearchbar, i8.IonTextarea, i8.IonTitle, i8.IonToolbar, i8.IonModal, i8.NumericValueAccessor, i8.TextValueAccessor, i9.NgControlStatus, i9.NgModel, i7.SlicePipe, i7.DecimalPipe, i7.DatePipe],\n  styles: [\".delete-button[_ngcontent-%COMP%] {\\n  position: absolute;\\n  top: 5px;\\n  right: 5px;\\n  background: none;\\n  border: none;\\n  color: red;\\n  font-size: 10px;\\n  cursor: pointer;\\n  padding: 0;\\n  \\n\\n}\\n.delete-button[_ngcontent-%COMP%]:hover {\\n  color: darkred;\\n  transform: scale(1);\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9kZXNzZXJ0LXJlY2lwZXMvZGVzc2VydC1yZWNpcGVzLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksa0JBQUE7RUFDQSxRQUFBO0VBQ0EsVUFBQTtFQUNBLGdCQUFBO0VBQ0EsWUFBQTtFQUNBLFVBQUE7RUFDQSxlQUFBO0VBQ0EsZUFBQTtFQUNBLFVBQUE7RUFFRSwyREFBQTtBQUFOO0FBQ0U7RUFDRSxjQUFBO0VBQ0EsbUJBQUE7QUFDSiIsInNvdXJjZXNDb250ZW50IjpbIi5kZWxldGUtYnV0dG9uIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiA1cHg7XG4gICAgcmlnaHQ6IDVweDtcbiAgICBiYWNrZ3JvdW5kOiBub25lO1xuICAgIGJvcmRlcjogbm9uZTtcbiAgICBjb2xvcjogcmVkO1xuICAgIGZvbnQtc2l6ZTogMTBweDtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgcGFkZGluZzogMDtcblxuICAgICAgLyogT3BjaW9uYWw6IGFncmVnYXIgdW4gaG92ZXIgcGFyYSBtZWpvcmFyIGxhIGV4cGVyaWVuY2lhICovXG4gICY6aG92ZXIge1xuICAgIGNvbG9yOiBkYXJrcmVkO1xuICAgIHRyYW5zZm9ybTogc2NhbGUoMSk7XG4gIH1cbn0gICJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵlistener","DessertRecipesComponent_ion_card_9_ion_button_1_Template_ion_button_click_0_listener","ɵɵrestoreView","_r4","recipe_r2","ɵɵnextContext","$implicit","ctx_r2","ɵɵresetView","deleteRecipe","id","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵproperty","imageUrl","star_r5","calificacionPromedio","DessertRecipesComponent_ion_card_9_ion_button_13_Template_ion_button_click_0_listener","_r6","navigateToEdit","DessertRecipesComponent_ion_card_9_Template_ion_card_click_0_listener","_r1","openRecipeModal","ɵɵtemplate","DessertRecipesComponent_ion_card_9_ion_button_1_Template","DessertRecipesComponent_ion_card_9_ion_img_2_Template","DessertRecipesComponent_ion_card_9_ion_icon_4_Template","DessertRecipesComponent_ion_card_9_Template_ion_button_click_11_listener","DessertRecipesComponent_ion_card_9_ion_button_13_Template","DessertRecipesComponent_ion_card_9_Template_ion_button_click_14_listener","addToFavorites","categoria","ɵɵadvance","creadorId","userId","ɵɵpureFunction0","_c0","ɵɵtextInterpolate","titulo","ɵɵtextInterpolate1","ɵɵpipeBind3","descripcion","isFavorite","selectedRecipe","DessertRecipesComponent_ng_template_11_ion_item_14_span_3_Template","DessertRecipesComponent_ng_template_11_ion_item_14_span_4_Template","ɵɵtextInterpolate3","ing_r8","nombre","cantidad","unidad","disponible","comentarios_r9","comment","ɵɵpipeBind2","averageRating","ɵɵpipeBind1","timestamp","DessertRecipesComponent_ng_template_11_Template_ion_button_click_5_listener","_r7","closeModal","DessertRecipesComponent_ng_template_11_ion_img_8_Template","DessertRecipesComponent_ng_template_11_ion_item_14_Template","DessertRecipesComponent_ng_template_11_ion_item_19_Template","ɵɵtwoWayListener","DessertRecipesComponent_ng_template_11_Template_ion_textarea_ngModelChange_23_listener","$event","ɵɵtwoWayBindingSet","newComment","DessertRecipesComponent_ng_template_11_Template_ion_range_ngModelChange_27_listener","newRating","DessertRecipesComponent_ng_template_11_Template_ion_button_click_30_listener","submitComment","DessertRecipesComponent_ng_template_11_Template_ion_button_click_32_listener","availableIngredients","comentarios","ɵɵtwoWayProperty","DessertRecipesComponent","constructor","recipeService","inventoryService","auth","firestore","router","unitConversionService","dessertRecipes","filteredDessertRecipes","isModalOpen","favorites","ngOnInit","user","subscribe","uid","loadFavorites","loadDessertRecipes","getRecipesByCategory","recipes","ratingPromises","map","recipe","loadRecipeRatings","then","Promise","all","sortRecipesByRating","sort","a","b","onSearch","event","_event$target$value","searchTerm","target","value","toLowerCase","filter","includes","checkIngredientsAvailability","ingredientes","getRecipeCommentsWithUser","comments","recipeIngredients","validUnits","getInventory","inventory","ingredient","inventoryItem","find","item","_item$nombre","_ingredient$nombre","normalizedIngredientUnit","normalizeUnit","normalizedInventoryUnit","unidadMedida","console","log","Error","cantidadConvertida","convertirUnidad","error","unit","rateRecipe","rating","trim","addCommentWithRating","catch","recipeId","resolve","collection","doc","valueChanges","length","totalRating","reduce","acc","confirm","category","favoriteRecipe","add","some","fav","navigate","ɵɵdirectiveInject","i1","RecipeService","i2","InventoryService","i3","AngularFireAuth","i4","AngularFirestore","i5","Router","i6","UnitConversionService","selectors","decls","vars","consts","template","DessertRecipesComponent_Template","rf","ctx","DessertRecipesComponent_Template_ion_searchbar_ionInput_7_listener","DessertRecipesComponent_ion_card_9_Template","DessertRecipesComponent_Template_ion_modal_didDismiss_10_listener","DessertRecipesComponent_ng_template_11_Template"],"sources":["/home/jcanulao/Documentos/Miven1.0.0-main/src/app/components/dessert-recipes/dessert-recipes.component.ts","/home/jcanulao/Documentos/Miven1.0.0-main/src/app/components/dessert-recipes/dessert-recipes.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { RecipeService } from '../../services/recipe.service';\nimport { InventoryService } from '../../services/inventory.service'; \nimport { AngularFireAuth } from '@angular/fire/compat/auth';\nimport { AngularFirestore } from '@angular/fire/compat/firestore';\nimport { Router } from '@angular/router';\nimport { UnitConversionService } from '../../shared/services/unit-conversion.service';\n\ntype Unidad = 'gramos' | 'ml' | 'tazas' | 'onzas';\n\n@Component({\n  selector: 'app-dessert-recipes',\n  templateUrl: './dessert-recipes.component.html',\n  styleUrls: ['./dessert-recipes.component.scss']\n})\nexport class DessertRecipesComponent implements OnInit {\n  dessertRecipes: any[] = [];\n  filteredDessertRecipes: any[] = [];\n  isModalOpen = false;\n  selectedRecipe: any | null = null;\n  userId: string | null = null;\n  availableIngredients: any[] = [];\n  newComment = '';\n  newRating: number = 1;\n  favorites: any[] = [];\n\n  constructor(\n    private recipeService: RecipeService, \n    private inventoryService: InventoryService,\n    private auth: AngularFireAuth,\n    private firestore: AngularFirestore,\n    private router: Router, // Agregar el servicio Router\n    private unitConversionService: UnitConversionService\n    \n  ) {}\n\n  ngOnInit(): void {\n    this.auth.user.subscribe(user => {\n      if (user) {\n        this.userId = user.uid;\n        this.loadFavorites();\n      }\n    });\n    this.loadDessertRecipes();\n  }\n  loadDessertRecipes() {\n  this.recipeService.getRecipesByCategory('postre').subscribe(recipes => {\n    this.dessertRecipes = recipes;\n    this.filteredDessertRecipes = recipes;\n\n    const ratingPromises = this.dessertRecipes.map(recipe => \n      this.loadRecipeRatings(recipe.id).then(averageRating => {\n        recipe.averageRating = averageRating;\n      })\n    );\n\n    Promise.all(ratingPromises).then(() => {\n      // Ordenar recetas por calificación promedio\n      this.sortRecipesByRating();\n    });\n  });\n}\n            \n  sortRecipesByRating() {\n    this.filteredDessertRecipes.sort((a, b) => {\n      return (b.averageRating || 0) - (a.averageRating || 0); \n      });\n  }\n\n  onSearch(event: any) {\n    const searchTerm = event.target.value?.toLowerCase() || '';\n    if (!searchTerm) {\n      this.filteredDessertRecipes = this.dessertRecipes;\n    } else {\n      this.filteredDessertRecipes = this.dessertRecipes.filter(recipe =>\n        recipe.titulo.toLowerCase().includes(searchTerm)\n      );\n    }\n  }\n\n  openRecipeModal(recipe: any) {\n    this.selectedRecipe = recipe;\n    this.checkIngredientsAvailability(recipe.ingredientes);\n    this.recipeService.getRecipeCommentsWithUser(recipe.id).subscribe((comments: any[]) => {\n      this.selectedRecipe.comentarios = comments;\n    });\n    this.isModalOpen = true;\n  }\n\n  closeModal() {\n    this.isModalOpen = false;\n    this.selectedRecipe = null;\n  }\n\n  // Verificar la disponibilidad de los ingredientes en el inventario\n  checkIngredientsAvailability(recipeIngredients: { nombre: string; cantidad: number; unidad: string }[]) {\n    const validUnits: Unidad[] = ['gramos', 'ml', 'tazas', 'onzas'];\n  \n    if (this.userId) {\n      this.inventoryService.getInventory(this.userId).subscribe(inventory => {\n        this.availableIngredients = recipeIngredients.map(ingredient => {\n          const inventoryItem = inventory.find(item =>\n            item?.nombre?.toLowerCase() === ingredient?.nombre?.toLowerCase()\n          );\n  \n          if (inventoryItem) {\n            try {\n              const normalizedIngredientUnit = this.normalizeUnit(ingredient.unidad);\n              const normalizedInventoryUnit = this.normalizeUnit(inventoryItem.unidadMedida);\n  \n              console.log(\n                `Normalizando unidades: Ingrediente (${ingredient.unidad}) -> ${normalizedIngredientUnit}, Inventario (${inventoryItem.unidadMedida}) -> ${normalizedInventoryUnit}`\n              );\n  \n              if (!validUnits.includes(normalizedIngredientUnit) || !validUnits.includes(normalizedInventoryUnit)) {\n                throw new Error(`Unidad no válida: ${ingredient.unidad} o ${inventoryItem.unidadMedida}`);\n              }\n  \n              const cantidadConvertida = this.inventoryService.convertirUnidad(\n                ingredient.cantidad,\n                normalizedIngredientUnit,\n                normalizedInventoryUnit\n              );\n  \n              console.log(\n                `Convirtiendo: ${ingredient.cantidad} ${normalizedIngredientUnit} a ${normalizedInventoryUnit}, Resultado: ${cantidadConvertida}`\n              );\n  \n              console.log(\n                `Verificando cantidad: Inventario (${inventoryItem.cantidad} ${inventoryItem.unidadMedida}), Necesario (${cantidadConvertida} ${inventoryItem.unidadMedida})`\n              );\n  \n              const disponible = inventoryItem.cantidad >= cantidadConvertida;\n  \n              return {\n                nombre: ingredient.nombre,\n                cantidad: ingredient.cantidad,\n                unidad: ingredient.unidad,\n                disponible\n              };\n            } catch (error) {\n              console.error(`Error al convertir ${ingredient.nombre}:`, error);\n              return {\n                nombre: ingredient.nombre,\n                cantidad: ingredient.cantidad,\n                unidad: ingredient.unidad,\n                disponible: false\n              };\n            }\n          } else {\n            return {\n              nombre: ingredient.nombre,\n              cantidad: ingredient.cantidad,\n              unidad: ingredient.unidad,\n              disponible: false\n            };\n          }\n        });\n      });\n    }\n  }\n  \n  \n  normalizeUnit(unit: string): Unidad {\n    switch (unit.toLowerCase()) {\n      case 'ml':\n        return 'ml';\n      case 'tazas':\n        return 'tazas';\n      case 'onzas':\n        return 'onzas';\n      case 'gramos':\n        return 'gramos';\n      default:\n        throw new Error(`Unidad no válida: ${unit}`);\n    }\n  }\n\n  rateRecipe(rating: number) {\n    this.newRating = rating; \n  }\n\n  submitComment() {\n    if (this.selectedRecipe && this.userId && this.newComment.trim()) {\n      this.recipeService.addCommentWithRating(\n        this.selectedRecipe.id, \n        this.userId, \n        this.newRating, \n        this.newComment\n      ).then(() => {\n        console.log('Comentario y calificación enviados');\n        this.newComment = '';\n        this.newRating = 1;\n        this.closeModal();\n      }).catch(error => {\n        console.error('Error al enviar el comentario:', error);\n      });\n    } else {\n      console.error('Faltan datos para enviar el comentario o el usuario no está autenticado');\n    }\n  }\n\n  loadRecipeRatings(recipeId: string): Promise<number> {\n    return new Promise((resolve) => {\n      this.firestore.collection('recetas').doc(recipeId).collection('comentarios')\n        .valueChanges().subscribe((comments: any[]) => {\n          if (comments.length > 0) {\n            const totalRating = comments.reduce((acc, comment) => acc + comment.rating, 0);\n            const averageRating = totalRating / comments.length;\n            resolve(averageRating);\n          } else {\n            resolve(0); // Sin calificaciones\n          }\n        });\n    });\n  }\n\n\n  deleteRecipe(recipeId: string) {\n    if (confirm('¿Estás seguro de que deseas eliminar esta receta?')) {\n      this.recipeService.deleteRecipe(recipeId).then(() => {\n        console.log('Receta eliminada con éxito');\n        this.loadDessertRecipes();\n      }).catch(error => {\n        console.error('Error al eliminar la receta:', error);\n      });\n    }\n  }\n\n  loadFavorites() {\n    if (!this.userId) return;\n    this.firestore\n      .collection('usuarios')\n      .doc(this.userId)\n      .collection('favoritos')\n      .valueChanges()\n      .subscribe(favorites => {\n        this.favorites = favorites;\n      });\n  }\n\n  addToFavorites(recipeId: string, category: string) {\n    if (this.userId) {\n    if (this.isFavorite(recipeId)) {\n        console.log('La receta ya está en favoritos');\n        return;\n      }\n\n      const favoriteRecipe = {\n        recipeId: recipeId,\n        category: category,\n        userId: this.userId\n      };\n      this.firestore.collection('usuarios').doc(this.userId).collection('favoritos').add(favoriteRecipe).then(() => {\n        console.log('Receta agregada a favoritos');\n      }).catch(error => {\n        console.error('Error al agregar a favoritos:', error);\n      });\n    }\n  }\n  isFavorite(recipeId: string): boolean {\n    return this.favorites.some(fav => fav.recipeId === recipeId);\n  }\n  navigateToEdit(recipeId: string) {\n    // Navegar a la página de edición de recetas\n    this.router.navigate(['/edit-recipe', recipeId]);\n  }\n  \n}\n","<ion-header>\n  <ion-toolbar>\n   <ion-buttons slot=\"start\">\n     <ion-menu-button></ion-menu-button>\n   <ion-title>Recetas de Postre</ion-title>\n  </ion-buttons>\n </ion-toolbar>\n</ion-header>\n\n<ion-content>\n  <ion-searchbar placeholder=\"Buscar receta\" (ionInput)=\"onSearch($event)\"></ion-searchbar>\n\n  <ion-list>\n    <!-- Iterar sobre cada receta -->\n    <ion-card *ngFor=\"let recipe of filteredDessertRecipes\" (click)=\"openRecipeModal(recipe)\">\n      <ion-button class=\"delete-button\" *ngIf=\"recipe.creadorId === userId\" (click)=\"deleteRecipe(recipe.id)\" color=\"danger\">\n        x\n      </ion-button>\n      <ion-img *ngIf=\"recipe.imageUrl\" [src]=\"recipe.imageUrl\" alt=\"Imagen de la receta\"></ion-img>\n\n      <!-- Estrellas de calificación -->\n      <div class=\"star-rating\">\n        <ion-icon *ngFor=\"let star of [1, 2, 3, 4, 5]\" [name]=\"star <= recipe.calificacionPromedio ? 'star' : 'star-outline'\"></ion-icon>\n      </div>\n\n      <ion-card-header>\n        <ion-card-title>{{ recipe.titulo }}</ion-card-title>\n      </ion-card-header>\n\n      <ion-card-content>\n        {{ recipe.descripcion | slice:0:100 }}...\n\n        <ion-button fill=\"clear\" (click)=\"openRecipeModal(recipe)\">Ver más</ion-button>\n        \n\n\n        <ion-button *ngIf=\"userId === recipe.creadorId\" (click)=\"navigateToEdit(recipe.id)\" color=\"primary\">\n          Editar\n        </ion-button>\n        \n        <ion-button fill=\"clear\" (click)=\"addToFavorites(recipe.id, recipe.categoria)\">\n          <ion-icon [name]=\"isFavorite(recipe.id) ? 'heart' : 'heart-outline'\" [color]=\"isFavorite(recipe.id) ? 'danger' : 'medium'\"></ion-icon>\n        </ion-button>      \n      </ion-card-content>\n    </ion-card>\n  </ion-list>\n\n\n  <ion-modal [isOpen]=\"isModalOpen\" (didDismiss)=\"closeModal()\">\n    <ng-template>\n      <ion-header>\n        <ion-toolbar>\n          <ion-title>{{ selectedRecipe?.titulo }}</ion-title>\n          <ion-buttons slot=\"end\">\n            <ion-button (click)=\"closeModal()\">Cerrar</ion-button>\n          </ion-buttons>\n        </ion-toolbar>\n      </ion-header>\n\n      <ion-content>\n        <ion-img *ngIf=\"selectedRecipe?.imageUrl\" [src]=\"selectedRecipe?.imageUrl\" alt=\"Imagen de la receta\"></ion-img>\n\n        <ion-list>\n          <ion-item>\n            <ion-label>\n              <h2>{{ selectedRecipe?.titulo }}</h2>\n              </ion-label>\n          </ion-item>\n\n          <!-- Mostrar ingredientes y si están en el inventario o no -->\n           \n          <ion-item *ngFor=\"let ing of availableIngredients\">\n            <ion-label>\n              {{ ing.nombre }} - {{ ing.cantidad }} {{ ing.unidad }}\n              <span *ngIf=\"ing.disponible\" style=\"color: green;\">Disponible</span>\n              <span *ngIf=\"!ing.disponible\" style=\"color: red;\">No disponible</span>\n            </ion-label>\n          </ion-item>\n\n           <ion-item>\n           <ion-label>\n            <h2>{{ selectedRecipe?.descripcion }}</h2>\n          </ion-label>\n        </ion-item>\n\n          <!-- Mostrar comentarios -->\n          <ion-item *ngFor=\"let comentarios of selectedRecipe?.comentarios\">\n            <ion-label>\n              <h3>{{ comentarios.comment }}</h3>\n              <p>Calificación promedio: {{ selectedRecipe.averageRating | number: '1.1-1' }}</p>\n              <p>Fecha: {{ comentarios.timestamp | date }}</p>\n            </ion-label>\n          </ion-item>\n        </ion-list>\n\n        <!-- Formulario para agregar comentario y calificación -->\n        <ion-item>\n          <ion-label position=\"floating\">Escribe tu comentario</ion-label>\n          <ion-textarea [(ngModel)]=\"newComment\"></ion-textarea>\n        </ion-item>\n\n        <ion-item>\n          <ion-label>Califica esta receta</ion-label>\n          <ion-range min=\"1\" max=\"5\" step=\"1\" snaps=\"true\" [(ngModel)]=\"newRating\">\n            <ion-icon slot=\"start\" name=\"star-outline\"></ion-icon>\n            <ion-icon slot=\"end\" name=\"star\"></ion-icon>\n          </ion-range>\n        </ion-item>\n\n        <!-- Botón para enviar comentario y calificación -->\n        <ion-button (click)=\"submitComment()\">Enviar</ion-button>\n        <ion-button (click)=\"closeModal()\">Cerrar</ion-button>\n        \n      </ion-content>\n    </ng-template>\n  </ion-modal>\n</ion-content>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}