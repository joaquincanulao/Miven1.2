{"ast":null,"code":"var _BreakfastRecipesComponent;\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/recipe.service\";\nimport * as i2 from \"../../services/inventory.service\";\nimport * as i3 from \"@angular/fire/compat/auth\";\nimport * as i4 from \"@angular/fire/compat/firestore\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@ionic/angular\";\nimport * as i8 from \"@angular/forms\";\nconst _c0 = () => [1, 2, 3, 4, 5];\nfunction BreakfastRecipesComponent_ion_card_9_ion_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 12);\n    i0.ɵɵlistener(\"click\", function BreakfastRecipesComponent_ion_card_9_ion_button_1_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const recipe_r2 = i0.ɵɵnextContext().$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.deleteRecipe(recipe_r2.id));\n    });\n    i0.ɵɵtext(1, \" x \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction BreakfastRecipesComponent_ion_card_9_ion_img_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-img\", 13);\n  }\n  if (rf & 2) {\n    const recipe_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"src\", recipe_r2.imageUrl);\n  }\n}\nfunction BreakfastRecipesComponent_ion_card_9_ion_icon_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-icon\", 14);\n  }\n  if (rf & 2) {\n    const star_r5 = ctx.$implicit;\n    const recipe_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"name\", star_r5 <= recipe_r2.calificacionPromedio ? \"star\" : \"star-outline\");\n  }\n}\nfunction BreakfastRecipesComponent_ion_card_9_ion_button_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 15);\n    i0.ɵɵlistener(\"click\", function BreakfastRecipesComponent_ion_card_9_ion_button_13_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const recipe_r2 = i0.ɵɵnextContext().$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.navigateToEdit(recipe_r2.id));\n    });\n    i0.ɵɵtext(1, \" Editar \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction BreakfastRecipesComponent_ion_card_9_span_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"\\u2714 En favoritos\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction BreakfastRecipesComponent_ion_card_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-card\", 4);\n    i0.ɵɵlistener(\"click\", function BreakfastRecipesComponent_ion_card_9_Template_ion_card_click_0_listener() {\n      const recipe_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.openRecipeModal(recipe_r2));\n    });\n    i0.ɵɵtemplate(1, BreakfastRecipesComponent_ion_card_9_ion_button_1_Template, 2, 0, \"ion-button\", 5)(2, BreakfastRecipesComponent_ion_card_9_ion_img_2_Template, 1, 1, \"ion-img\", 6);\n    i0.ɵɵelementStart(3, \"div\", 7);\n    i0.ɵɵtemplate(4, BreakfastRecipesComponent_ion_card_9_ion_icon_4_Template, 1, 1, \"ion-icon\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"ion-card-header\")(6, \"ion-card-title\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"ion-card-content\");\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"slice\");\n    i0.ɵɵelementStart(11, \"ion-button\", 9);\n    i0.ɵɵlistener(\"click\", function BreakfastRecipesComponent_ion_card_9_Template_ion_button_click_11_listener() {\n      const recipe_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.openRecipeModal(recipe_r2));\n    });\n    i0.ɵɵtext(12, \"Ver m\\u00E1s\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(13, BreakfastRecipesComponent_ion_card_9_ion_button_13_Template, 2, 0, \"ion-button\", 10);\n    i0.ɵɵelementStart(14, \"ion-button\", 4);\n    i0.ɵɵlistener(\"click\", function BreakfastRecipesComponent_ion_card_9_Template_ion_button_click_14_listener() {\n      const recipe_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.addToFavorites(recipe_r2.id, recipe_r2.categoria, recipe_r2.creadorId));\n    });\n    i0.ɵɵtext(15, \" Agregar a Favoritos \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(16, BreakfastRecipesComponent_ion_card_9_span_16_Template, 2, 0, \"span\", 11);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const recipe_r2 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", recipe_r2.creadorId === ctx_r2.userId);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", recipe_r2.imageUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpureFunction0(11, _c0));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(recipe_r2.titulo);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind3(10, 7, recipe_r2.descripcion, 0, 100), \"... \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.userId === recipe_r2.creadorId);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.isFavorite(recipe_r2.id));\n  }\n}\nfunction BreakfastRecipesComponent_ng_template_11_ion_img_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-img\", 13);\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"src\", ctx_r2.selectedRecipe == null ? null : ctx_r2.selectedRecipe.imageUrl);\n  }\n}\nfunction BreakfastRecipesComponent_ng_template_11_ion_item_14_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 25);\n    i0.ɵɵtext(1, \"Disponible\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction BreakfastRecipesComponent_ng_template_11_ion_item_14_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 26);\n    i0.ɵɵtext(1, \"No disponible\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction BreakfastRecipesComponent_ng_template_11_ion_item_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\")(1, \"ion-label\");\n    i0.ɵɵtext(2);\n    i0.ɵɵtemplate(3, BreakfastRecipesComponent_ng_template_11_ion_item_14_span_3_Template, 2, 0, \"span\", 23)(4, BreakfastRecipesComponent_ng_template_11_ion_item_14_span_4_Template, 2, 0, \"span\", 24);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ing_r8 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate3(\" \", ing_r8.nombre, \" - \", ing_r8.cantidad, \" \", ing_r8.unidad, \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ing_r8.disponible);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ing_r8.disponible);\n  }\n}\nfunction BreakfastRecipesComponent_ng_template_11_ion_item_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\")(1, \"ion-label\")(2, \"h3\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\");\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"date\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const comentarios_r9 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(comentarios_r9.comment);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Calificaci\\u00F3n promedio: \", i0.ɵɵpipeBind2(6, 3, ctx_r2.selectedRecipe.averageRating, \"1.1-1\"), \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Fecha: \", i0.ɵɵpipeBind1(9, 6, comentarios_r9.timestamp), \"\");\n  }\n}\nfunction BreakfastRecipesComponent_ng_template_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-title\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"ion-buttons\", 16)(5, \"ion-button\", 4);\n    i0.ɵɵlistener(\"click\", function BreakfastRecipesComponent_ng_template_11_Template_ion_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.closeModal());\n    });\n    i0.ɵɵtext(6, \"Cerrar\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(7, \"ion-content\");\n    i0.ɵɵtemplate(8, BreakfastRecipesComponent_ng_template_11_ion_img_8_Template, 1, 1, \"ion-img\", 6);\n    i0.ɵɵelementStart(9, \"ion-list\")(10, \"ion-item\")(11, \"ion-label\")(12, \"h2\");\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(14, BreakfastRecipesComponent_ng_template_11_ion_item_14_Template, 5, 5, \"ion-item\", 17);\n    i0.ɵɵelementStart(15, \"ion-item\")(16, \"ion-label\")(17, \"h2\");\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(19, BreakfastRecipesComponent_ng_template_11_ion_item_19_Template, 10, 8, \"ion-item\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"ion-item\")(21, \"ion-label\", 18);\n    i0.ɵɵtext(22, \"Escribe tu comentario\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"ion-textarea\", 19);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function BreakfastRecipesComponent_ng_template_11_Template_ion_textarea_ngModelChange_23_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r2 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r2.newComment, $event) || (ctx_r2.newComment = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(24, \"ion-item\")(25, \"ion-label\");\n    i0.ɵɵtext(26, \"Califica esta receta\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"ion-range\", 20);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function BreakfastRecipesComponent_ng_template_11_Template_ion_range_ngModelChange_27_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r2 = i0.ɵɵnextContext();\n      i0.ɵɵtwoWayBindingSet(ctx_r2.newRating, $event) || (ctx_r2.newRating = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelement(28, \"ion-icon\", 21)(29, \"ion-icon\", 22);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(30, \"ion-button\", 4);\n    i0.ɵɵlistener(\"click\", function BreakfastRecipesComponent_ng_template_11_Template_ion_button_click_30_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.submitComment());\n    });\n    i0.ɵɵtext(31, \"Enviar\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(32, \"ion-button\", 4);\n    i0.ɵɵlistener(\"click\", function BreakfastRecipesComponent_ng_template_11_Template_ion_button_click_32_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.closeModal());\n    });\n    i0.ɵɵtext(33, \"Cerrar\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r2.selectedRecipe == null ? null : ctx_r2.selectedRecipe.titulo);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.selectedRecipe == null ? null : ctx_r2.selectedRecipe.imageUrl);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r2.selectedRecipe == null ? null : ctx_r2.selectedRecipe.titulo);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.availableIngredients);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r2.selectedRecipe == null ? null : ctx_r2.selectedRecipe.descripcion);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.selectedRecipe == null ? null : ctx_r2.selectedRecipe.comentarios);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r2.newComment);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtwoWayProperty(\"ngModel\", ctx_r2.newRating);\n  }\n}\nexport class BreakfastRecipesComponent {\n  constructor(recipeService, inventoryService, auth, firestore, router) {\n    this.recipeService = recipeService;\n    this.inventoryService = inventoryService;\n    this.auth = auth;\n    this.firestore = firestore;\n    this.router = router;\n    this.breakfastRecipes = [];\n    this.filteredBreakfastRecipes = [];\n    this.isModalOpen = false;\n    this.selectedRecipe = null;\n    this.userId = null;\n    this.availableIngredients = [];\n    this.newComment = '';\n    this.newRating = 1;\n    this.favorites = [];\n  }\n  ngOnInit() {\n    this.auth.user.subscribe(user => {\n      if (user) {\n        this.userId = user.uid;\n        this.loadFavorites();\n      }\n    });\n    this.loadBreakfastRecipes();\n  }\n  loadBreakfastRecipes() {\n    this.recipeService.getRecipesByCategory('desayuno').subscribe(recipes => {\n      this.breakfastRecipes = recipes;\n      this.filteredBreakfastRecipes = recipes;\n      const ratingPromises = this.breakfastRecipes.map(recipe => this.loadRecipeRatings(recipe.id).then(averageRating => {\n        recipe.averageRating = averageRating;\n      }));\n      Promise.all(ratingPromises).then(() => {\n        this.sortRecipesByRating();\n      });\n    });\n  }\n  sortRecipesByRating() {\n    this.filteredBreakfastRecipes.sort((a, b) => {\n      return (b.averageRating || 0) - (a.averageRating || 0);\n    });\n  }\n  onSearch(event) {\n    var _event$target$value;\n    const searchTerm = ((_event$target$value = event.target.value) === null || _event$target$value === void 0 ? void 0 : _event$target$value.toLowerCase()) || '';\n    if (!searchTerm) {\n      this.filteredBreakfastRecipes = this.breakfastRecipes;\n    } else {\n      this.filteredBreakfastRecipes = this.breakfastRecipes.filter(recipe => recipe.titulo.toLowerCase().includes(searchTerm));\n    }\n  }\n  openRecipeModal(recipe) {\n    this.selectedRecipe = recipe;\n    this.checkIngredientsAvailability(recipe.ingredientes);\n    this.recipeService.getRecipeCommentsWithUser(recipe.id).subscribe(comments => {\n      this.selectedRecipe.comentarios = comments;\n    });\n    this.isModalOpen = true;\n  }\n  closeModal() {\n    this.isModalOpen = false;\n    this.selectedRecipe = null;\n  }\n  // Verificar la disponibilidad de los ingredientes en el inventario\n  checkIngredientsAvailability(recipeIngredients) {\n    const validUnits = ['gramos', 'ml', 'tazas', 'onzas'];\n    if (this.userId) {\n      this.inventoryService.getInventory(this.userId).subscribe(inventory => {\n        this.availableIngredients = recipeIngredients.map(ingredient => {\n          const inventoryItem = inventory.find(item => {\n            var _item$nombre, _ingredient$nombre;\n            return (item === null || item === void 0 || (_item$nombre = item.nombre) === null || _item$nombre === void 0 ? void 0 : _item$nombre.toLowerCase()) === (ingredient === null || ingredient === void 0 || (_ingredient$nombre = ingredient.nombre) === null || _ingredient$nombre === void 0 ? void 0 : _ingredient$nombre.toLowerCase());\n          });\n          if (inventoryItem) {\n            try {\n              // Validar las unidades antes de convertir\n              if (!validUnits.includes(ingredient.unidad) || !validUnits.includes(inventoryItem.unidadMedida)) {\n                throw new Error(`Unidad no válida: ${ingredient.unidad} o ${inventoryItem.unidadMedida}`);\n              }\n              // Convertir la cantidad de la receta a la unidad del inventario\n              const cantidadConvertida = this.inventoryService.convertirUnidad(ingredient.cantidad, ingredient.unidad, inventoryItem.unidadMedida);\n              return {\n                nombre: ingredient.nombre,\n                cantidad: ingredient.cantidad,\n                unidad: ingredient.unidad,\n                disponible: inventoryItem.cantidad >= cantidadConvertida\n              };\n            } catch (error) {\n              console.error(`Error al convertir ${ingredient.nombre}:`, error);\n              return {\n                nombre: ingredient.nombre,\n                cantidad: ingredient.cantidad,\n                unidad: ingredient.unidad,\n                disponible: false\n              };\n            }\n          } else {\n            return {\n              nombre: ingredient.nombre,\n              cantidad: ingredient.cantidad,\n              unidad: ingredient.unidad,\n              disponible: false\n            };\n          }\n        });\n      });\n    }\n  }\n  rateRecipe(rating) {\n    this.newRating = rating;\n  }\n  submitComment() {\n    if (this.selectedRecipe && this.userId && this.newComment.trim()) {\n      this.recipeService.addCommentWithRating(this.selectedRecipe.id, this.userId, this.newRating, this.newComment).then(() => {\n        console.log('Comentario y calificación enviados');\n        this.newComment = '';\n        this.newRating = 1;\n        this.closeModal();\n      }).catch(error => {\n        console.error('Error al enviar el comentario:', error);\n      });\n    } else {\n      console.error('Faltan datos para enviar el comentario o el usuario no está autenticado');\n    }\n  }\n  loadRecipeRatings(recipeId) {\n    return new Promise(resolve => {\n      this.firestore.collection('recetas').doc(recipeId).collection('comentarios').valueChanges().subscribe(comments => {\n        if (comments.length > 0) {\n          const totalRating = comments.reduce((acc, comment) => acc + comment.rating, 0);\n          const averageRating = totalRating / comments.length;\n          resolve(averageRating);\n        } else {\n          resolve(0);\n        }\n      });\n    });\n  }\n  deleteRecipe(recipeId) {\n    if (confirm('¿Estás seguro de que deseas eliminar esta receta?')) {\n      this.recipeService.deleteRecipe(recipeId).then(() => {\n        console.log('Receta eliminada con éxito');\n        this.loadBreakfastRecipes();\n      }).catch(error => {\n        console.error('Error al eliminar la receta:', error);\n      });\n    }\n  }\n  loadFavorites() {\n    if (!this.userId) return;\n    this.firestore.collection('usuarios').doc(this.userId).collection('favoritos').valueChanges().subscribe(favorites => {\n      this.favorites = favorites;\n    });\n  }\n  addToFavorites(recipeId, category, creadorId) {\n    if (this.userId) {\n      const favoriteRecipe = {\n        recipeId,\n        category,\n        creadorId,\n        userId: this.userId,\n        dateAdded: new Date()\n      };\n      this.firestore.collection('usuarios').doc(this.userId).collection('favoritos').add(favoriteRecipe).then(() => console.log('Receta agregada a favoritos')).catch(error => console.error('Error al agregar a favoritos:', error));\n    }\n  }\n  isFavorite(recipeId) {\n    return this.favorites.some(fav => fav.recipeId === recipeId);\n  }\n  navigateToEdit(recipeId) {\n    this.router.navigate(['/edit-recipe', recipeId]);\n  }\n}\n_BreakfastRecipesComponent = BreakfastRecipesComponent;\n_BreakfastRecipesComponent.ɵfac = function BreakfastRecipesComponent_Factory(__ngFactoryType__) {\n  return new (__ngFactoryType__ || _BreakfastRecipesComponent)(i0.ɵɵdirectiveInject(i1.RecipeService), i0.ɵɵdirectiveInject(i2.InventoryService), i0.ɵɵdirectiveInject(i3.AngularFireAuth), i0.ɵɵdirectiveInject(i4.AngularFirestore), i0.ɵɵdirectiveInject(i5.Router));\n};\n_BreakfastRecipesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _BreakfastRecipesComponent,\n  selectors: [[\"app-breakfast-recipes\"]],\n  decls: 12,\n  vars: 2,\n  consts: [[\"slot\", \"start\"], [\"placeholder\", \"Buscar receta\", 3, \"ionInput\"], [3, \"click\", 4, \"ngFor\", \"ngForOf\"], [3, \"didDismiss\", \"isOpen\"], [3, \"click\"], [\"class\", \"delete-button\", \"color\", \"danger\", 3, \"click\", 4, \"ngIf\"], [\"alt\", \"Imagen de la receta\", 3, \"src\", 4, \"ngIf\"], [1, \"star-rating\"], [3, \"name\", 4, \"ngFor\", \"ngForOf\"], [\"fill\", \"clear\", 3, \"click\"], [\"color\", \"primary\", 3, \"click\", 4, \"ngIf\"], [4, \"ngIf\"], [\"color\", \"danger\", 1, \"delete-button\", 3, \"click\"], [\"alt\", \"Imagen de la receta\", 3, \"src\"], [3, \"name\"], [\"color\", \"primary\", 3, \"click\"], [\"slot\", \"end\"], [4, \"ngFor\", \"ngForOf\"], [\"position\", \"floating\"], [3, \"ngModelChange\", \"ngModel\"], [\"min\", \"1\", \"max\", \"5\", \"step\", \"1\", \"snaps\", \"true\", 3, \"ngModelChange\", \"ngModel\"], [\"slot\", \"start\", \"name\", \"star-outline\"], [\"slot\", \"end\", \"name\", \"star\"], [\"style\", \"color: green;\", 4, \"ngIf\"], [\"style\", \"color: red;\", 4, \"ngIf\"], [2, \"color\", \"green\"], [2, \"color\", \"red\"]],\n  template: function BreakfastRecipesComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-buttons\", 0);\n      i0.ɵɵelement(3, \"ion-menu-button\");\n      i0.ɵɵelementStart(4, \"ion-title\");\n      i0.ɵɵtext(5, \"Recetas de Desayuno\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(6, \"ion-content\")(7, \"ion-searchbar\", 1);\n      i0.ɵɵlistener(\"ionInput\", function BreakfastRecipesComponent_Template_ion_searchbar_ionInput_7_listener($event) {\n        return ctx.onSearch($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"ion-list\");\n      i0.ɵɵtemplate(9, BreakfastRecipesComponent_ion_card_9_Template, 17, 12, \"ion-card\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"ion-modal\", 3);\n      i0.ɵɵlistener(\"didDismiss\", function BreakfastRecipesComponent_Template_ion_modal_didDismiss_10_listener() {\n        return ctx.closeModal();\n      });\n      i0.ɵɵtemplate(11, BreakfastRecipesComponent_ng_template_11_Template, 34, 8, \"ng-template\");\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngForOf\", ctx.filteredBreakfastRecipes);\n      i0.ɵɵadvance();\n      i0.ɵɵproperty(\"isOpen\", ctx.isModalOpen);\n    }\n  },\n  dependencies: [i6.NgForOf, i6.NgIf, i7.IonButton, i7.IonButtons, i7.IonCard, i7.IonCardContent, i7.IonCardHeader, i7.IonCardTitle, i7.IonContent, i7.IonHeader, i7.IonIcon, i7.IonImg, i7.IonItem, i7.IonLabel, i7.IonList, i7.IonMenuButton, i7.IonRange, i7.IonSearchbar, i7.IonTextarea, i7.IonTitle, i7.IonToolbar, i7.IonModal, i7.NumericValueAccessor, i7.TextValueAccessor, i8.NgControlStatus, i8.NgModel, i6.SlicePipe, i6.DecimalPipe, i6.DatePipe],\n  styles: [\".delete-button[_ngcontent-%COMP%] {\\n  position: absolute;\\n  top: 5px;\\n  right: 5px;\\n  background: none;\\n  border: none;\\n  color: red;\\n  font-size: 10px;\\n  cursor: pointer;\\n  padding: 0;\\n  \\n\\n}\\n.delete-button[_ngcontent-%COMP%]:hover {\\n  color: darkred;\\n  transform: scale(1);\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9icmVha2Zhc3QtcmVjaXBlcy9icmVha2Zhc3QtcmVjaXBlcy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGtCQUFBO0VBQ0EsUUFBQTtFQUNBLFVBQUE7RUFDQSxnQkFBQTtFQUNBLFlBQUE7RUFDQSxVQUFBO0VBQ0EsZUFBQTtFQUNBLGVBQUE7RUFDQSxVQUFBO0VBRUUsMkRBQUE7QUFBTjtBQUNFO0VBQ0UsY0FBQTtFQUNBLG1CQUFBO0FBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyIuZGVsZXRlLWJ1dHRvbiB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHRvcDogNXB4O1xuICAgIHJpZ2h0OiA1cHg7XG4gICAgYmFja2dyb3VuZDogbm9uZTtcbiAgICBib3JkZXI6IG5vbmU7XG4gICAgY29sb3I6IHJlZDtcbiAgICBmb250LXNpemU6IDEwcHg7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIHBhZGRpbmc6IDA7XG5cbiAgICAgIC8qIE9wY2lvbmFsOiBhZ3JlZ2FyIHVuIGhvdmVyIHBhcmEgbWVqb3JhciBsYSBleHBlcmllbmNpYSAqL1xuICAmOmhvdmVyIHtcbiAgICBjb2xvcjogZGFya3JlZDtcbiAgICB0cmFuc2Zvcm06IHNjYWxlKDEpO1xuICB9XG59ICAiXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵlistener","BreakfastRecipesComponent_ion_card_9_ion_button_1_Template_ion_button_click_0_listener","ɵɵrestoreView","_r4","recipe_r2","ɵɵnextContext","$implicit","ctx_r2","ɵɵresetView","deleteRecipe","id","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵproperty","imageUrl","star_r5","calificacionPromedio","BreakfastRecipesComponent_ion_card_9_ion_button_13_Template_ion_button_click_0_listener","_r6","navigateToEdit","BreakfastRecipesComponent_ion_card_9_Template_ion_card_click_0_listener","_r1","openRecipeModal","ɵɵtemplate","BreakfastRecipesComponent_ion_card_9_ion_button_1_Template","BreakfastRecipesComponent_ion_card_9_ion_img_2_Template","BreakfastRecipesComponent_ion_card_9_ion_icon_4_Template","BreakfastRecipesComponent_ion_card_9_Template_ion_button_click_11_listener","BreakfastRecipesComponent_ion_card_9_ion_button_13_Template","BreakfastRecipesComponent_ion_card_9_Template_ion_button_click_14_listener","addToFavorites","categoria","creadorId","BreakfastRecipesComponent_ion_card_9_span_16_Template","ɵɵadvance","userId","ɵɵpureFunction0","_c0","ɵɵtextInterpolate","titulo","ɵɵtextInterpolate1","ɵɵpipeBind3","descripcion","isFavorite","selectedRecipe","BreakfastRecipesComponent_ng_template_11_ion_item_14_span_3_Template","BreakfastRecipesComponent_ng_template_11_ion_item_14_span_4_Template","ɵɵtextInterpolate3","ing_r8","nombre","cantidad","unidad","disponible","comentarios_r9","comment","ɵɵpipeBind2","averageRating","ɵɵpipeBind1","timestamp","BreakfastRecipesComponent_ng_template_11_Template_ion_button_click_5_listener","_r7","closeModal","BreakfastRecipesComponent_ng_template_11_ion_img_8_Template","BreakfastRecipesComponent_ng_template_11_ion_item_14_Template","BreakfastRecipesComponent_ng_template_11_ion_item_19_Template","ɵɵtwoWayListener","BreakfastRecipesComponent_ng_template_11_Template_ion_textarea_ngModelChange_23_listener","$event","ɵɵtwoWayBindingSet","newComment","BreakfastRecipesComponent_ng_template_11_Template_ion_range_ngModelChange_27_listener","newRating","BreakfastRecipesComponent_ng_template_11_Template_ion_button_click_30_listener","submitComment","BreakfastRecipesComponent_ng_template_11_Template_ion_button_click_32_listener","availableIngredients","comentarios","ɵɵtwoWayProperty","BreakfastRecipesComponent","constructor","recipeService","inventoryService","auth","firestore","router","breakfastRecipes","filteredBreakfastRecipes","isModalOpen","favorites","ngOnInit","user","subscribe","uid","loadFavorites","loadBreakfastRecipes","getRecipesByCategory","recipes","ratingPromises","map","recipe","loadRecipeRatings","then","Promise","all","sortRecipesByRating","sort","a","b","onSearch","event","_event$target$value","searchTerm","target","value","toLowerCase","filter","includes","checkIngredientsAvailability","ingredientes","getRecipeCommentsWithUser","comments","recipeIngredients","validUnits","getInventory","inventory","ingredient","inventoryItem","find","item","_item$nombre","_ingredient$nombre","unidadMedida","Error","cantidadConvertida","convertirUnidad","error","console","rateRecipe","rating","trim","addCommentWithRating","log","catch","recipeId","resolve","collection","doc","valueChanges","length","totalRating","reduce","acc","confirm","category","favoriteRecipe","dateAdded","Date","add","some","fav","navigate","ɵɵdirectiveInject","i1","RecipeService","i2","InventoryService","i3","AngularFireAuth","i4","AngularFirestore","i5","Router","selectors","decls","vars","consts","template","BreakfastRecipesComponent_Template","rf","ctx","BreakfastRecipesComponent_Template_ion_searchbar_ionInput_7_listener","BreakfastRecipesComponent_ion_card_9_Template","BreakfastRecipesComponent_Template_ion_modal_didDismiss_10_listener","BreakfastRecipesComponent_ng_template_11_Template"],"sources":["/home/jcanulao/Documentos/Miven1.0.0-main/src/app/components/breakfast-recipes/breakfast-recipes.component.ts","/home/jcanulao/Documentos/Miven1.0.0-main/src/app/components/breakfast-recipes/breakfast-recipes.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { RecipeService } from '../../services/recipe.service';\nimport { InventoryService } from '../../services/inventory.service';\nimport { AngularFireAuth } from '@angular/fire/compat/auth';\nimport { AngularFirestore } from '@angular/fire/compat/firestore';\nimport { Router } from '@angular/router';\n\ntype Unidad = 'gramos' | 'ml' | 'tazas' | 'onzas';\n\n@Component({\n  selector: 'app-breakfast-recipes',\n  templateUrl: './breakfast-recipes.component.html',\n  styleUrls: ['./breakfast-recipes.component.scss']\n})\nexport class BreakfastRecipesComponent implements OnInit {\n  breakfastRecipes: any[] = [];\n  filteredBreakfastRecipes: any[] = [];\n  isModalOpen = false;\n  selectedRecipe: any | null = null;\n  userId: string | null = null;\n  availableIngredients: any[] = [];\n  newComment = '';\n  newRating: number = 1;\n  favorites: any[] = [];\n\n  constructor(\n    private recipeService: RecipeService,\n    private inventoryService: InventoryService,\n    private auth: AngularFireAuth,\n    private firestore: AngularFirestore,\n    private router: Router\n  ) {}\n\n  ngOnInit(): void {\n    this.auth.user.subscribe(user => {\n      if (user) {\n        this.userId = user.uid;\n        this.loadFavorites();\n      }\n    });\n    this.loadBreakfastRecipes();\n  }\n\n  loadBreakfastRecipes() {\n    this.recipeService.getRecipesByCategory('desayuno').subscribe(recipes => {\n      this.breakfastRecipes = recipes;\n      this.filteredBreakfastRecipes = recipes;\n\n      const ratingPromises = this.breakfastRecipes.map(recipe =>\n        this.loadRecipeRatings(recipe.id).then(averageRating => {\n          recipe.averageRating = averageRating;\n        })\n      );\n\n      Promise.all(ratingPromises).then(() => {\n        this.sortRecipesByRating();\n      });\n    });\n  }\n\n  sortRecipesByRating() {\n    this.filteredBreakfastRecipes.sort((a, b) => {\n      return (b.averageRating || 0) - (a.averageRating || 0);\n    });\n  }\n\n  onSearch(event: any) {\n    const searchTerm = event.target.value?.toLowerCase() || '';\n    if (!searchTerm) {\n      this.filteredBreakfastRecipes = this.breakfastRecipes;\n    } else {\n      this.filteredBreakfastRecipes = this.breakfastRecipes.filter(recipe =>\n        recipe.titulo.toLowerCase().includes(searchTerm)\n      );\n    }\n  }\n\n  openRecipeModal(recipe: any) {\n    this.selectedRecipe = recipe;\n    this.checkIngredientsAvailability(recipe.ingredientes);\n    this.recipeService.getRecipeCommentsWithUser(recipe.id).subscribe((comments: any[]) => {\n      this.selectedRecipe.comentarios = comments;\n    });\n    this.isModalOpen = true;\n  }\n\n  closeModal() {\n    this.isModalOpen = false;\n    this.selectedRecipe = null;\n  }\n\n  // Verificar la disponibilidad de los ingredientes en el inventario\n  checkIngredientsAvailability(recipeIngredients: { nombre: string; cantidad: number; unidad: string }[]) {\n    const validUnits: Unidad[] = ['gramos', 'ml', 'tazas', 'onzas'];\n\n    if (this.userId) {\n      this.inventoryService.getInventory(this.userId).subscribe(inventory => {\n        this.availableIngredients = recipeIngredients.map(ingredient => {\n          const inventoryItem = inventory.find(item =>\n            item?.nombre?.toLowerCase() === ingredient?.nombre?.toLowerCase()\n          );\n\n          if (inventoryItem) {\n            try {\n              // Validar las unidades antes de convertir\n              if (\n                !validUnits.includes(ingredient.unidad as Unidad) ||\n                !validUnits.includes(inventoryItem.unidadMedida as Unidad)\n              ) {\n                throw new Error(\n                  `Unidad no válida: ${ingredient.unidad} o ${inventoryItem.unidadMedida}`\n                );\n              }\n\n              // Convertir la cantidad de la receta a la unidad del inventario\n              const cantidadConvertida = this.inventoryService.convertirUnidad(\n                ingredient.cantidad,\n                ingredient.unidad as Unidad,\n                inventoryItem.unidadMedida as Unidad\n              );\n\n              return {\n                nombre: ingredient.nombre,\n                cantidad: ingredient.cantidad,\n                unidad: ingredient.unidad,\n                disponible: inventoryItem.cantidad >= cantidadConvertida\n              };\n            } catch (error) {\n              console.error(`Error al convertir ${ingredient.nombre}:`, error);\n              return {\n                nombre: ingredient.nombre,\n                cantidad: ingredient.cantidad,\n                unidad: ingredient.unidad,\n                disponible: false\n              };\n            }\n          } else {\n            return {\n              nombre: ingredient.nombre,\n              cantidad: ingredient.cantidad,\n              unidad: ingredient.unidad,\n              disponible: false\n            };\n          }\n        });\n      });\n    }\n  }\n\n  rateRecipe(rating: number) {\n    this.newRating = rating;\n  }\n\n  submitComment() {\n    if (this.selectedRecipe && this.userId && this.newComment.trim()) {\n      this.recipeService\n        .addCommentWithRating(this.selectedRecipe.id, this.userId, this.newRating, this.newComment)\n        .then(() => {\n          console.log('Comentario y calificación enviados');\n          this.newComment = '';\n          this.newRating = 1;\n          this.closeModal();\n        })\n        .catch(error => {\n          console.error('Error al enviar el comentario:', error);\n        });\n    } else {\n      console.error('Faltan datos para enviar el comentario o el usuario no está autenticado');\n    }\n  }\n\n  loadRecipeRatings(recipeId: string): Promise<number> {\n    return new Promise(resolve => {\n      this.firestore\n        .collection('recetas')\n        .doc(recipeId)\n        .collection('comentarios')\n        .valueChanges()\n        .subscribe((comments: any[]) => {\n          if (comments.length > 0) {\n            const totalRating = comments.reduce((acc, comment) => acc + comment.rating, 0);\n            const averageRating = totalRating / comments.length;\n            resolve(averageRating);\n          } else {\n            resolve(0);\n          }\n        });\n    });\n  }\n\n  deleteRecipe(recipeId: string) {\n    if (confirm('¿Estás seguro de que deseas eliminar esta receta?')) {\n      this.recipeService\n        .deleteRecipe(recipeId)\n        .then(() => {\n          console.log('Receta eliminada con éxito');\n          this.loadBreakfastRecipes();\n        })\n        .catch(error => {\n          console.error('Error al eliminar la receta:', error);\n        });\n    }\n  }\n\n  loadFavorites() {\n    if (!this.userId) return;\n    this.firestore\n      .collection('usuarios')\n      .doc(this.userId)\n      .collection('favoritos')\n      .valueChanges()\n      .subscribe(favorites => {\n        this.favorites = favorites;\n      });\n  }\n\n  addToFavorites(recipeId: string, category: string, creadorId: string) {\n    if (this.userId) {\n      const favoriteRecipe = {\n        recipeId,\n        category,\n        creadorId,\n        userId: this.userId,\n        dateAdded: new Date()\n      };\n      this.firestore\n        .collection('usuarios')\n        .doc(this.userId)\n        .collection('favoritos')\n        .add(favoriteRecipe)\n        .then(() => console.log('Receta agregada a favoritos'))\n        .catch(error => console.error('Error al agregar a favoritos:', error));\n    }\n  }\n\n  isFavorite(recipeId: string): boolean {\n    return this.favorites.some(fav => fav.recipeId === recipeId);\n  }\n\n  navigateToEdit(recipeId: string) {\n    this.router.navigate(['/edit-recipe', recipeId]);\n  }\n}\n","<ion-header>\n  <ion-toolbar>\n   <ion-buttons slot=\"start\">\n     <ion-menu-button></ion-menu-button>\n   <ion-title>Recetas de Desayuno</ion-title>\n  </ion-buttons>\n </ion-toolbar>\n</ion-header>\n\n<ion-content>\n  <ion-searchbar placeholder=\"Buscar receta\" (ionInput)=\"onSearch($event)\"></ion-searchbar>\n\n  <ion-list>\n    <!-- Iterar sobre cada receta -->\n    <ion-card *ngFor=\"let recipe of filteredBreakfastRecipes\" (click)=\"openRecipeModal(recipe)\">\n      <ion-button class=\"delete-button\" *ngIf=\"recipe.creadorId === userId\" (click)=\"deleteRecipe(recipe.id)\" color=\"danger\">\n        x\n      </ion-button>\n      <ion-img *ngIf=\"recipe.imageUrl\" [src]=\"recipe.imageUrl\" alt=\"Imagen de la receta\"></ion-img>\n\n      <!-- Estrellas de calificación -->\n      <div class=\"star-rating\">\n        <ion-icon *ngFor=\"let star of [1, 2, 3, 4, 5]\" [name]=\"star <= recipe.calificacionPromedio ? 'star' : 'star-outline'\"></ion-icon>\n      </div>\n\n      <ion-card-header>\n        <ion-card-title>{{ recipe.titulo }}</ion-card-title>\n      </ion-card-header>\n\n      <ion-card-content>\n        {{ recipe.descripcion | slice:0:100 }}...\n\n        <ion-button fill=\"clear\" (click)=\"openRecipeModal(recipe)\">Ver más</ion-button>\n        \n\n\n        <ion-button *ngIf=\"userId === recipe.creadorId\" (click)=\"navigateToEdit(recipe.id)\" color=\"primary\">\n          Editar\n        </ion-button>\n        \n        <ion-button (click)=\"addToFavorites(recipe.id, recipe.categoria, recipe.creadorId)\">\n          Agregar a Favoritos\n        </ion-button>\n      \n        <!-- Indicador si la receta ya está en favoritos -->\n        <span *ngIf=\"isFavorite(recipe.id)\">✔ En favoritos</span>    \n      </ion-card-content>\n    </ion-card>\n  </ion-list>\n\n\n  <ion-modal [isOpen]=\"isModalOpen\" (didDismiss)=\"closeModal()\">\n    <ng-template>\n      <ion-header>\n        <ion-toolbar>\n          <ion-title>{{ selectedRecipe?.titulo }}</ion-title>\n          <ion-buttons slot=\"end\">\n            <ion-button (click)=\"closeModal()\">Cerrar</ion-button>\n          </ion-buttons>\n        </ion-toolbar>\n      </ion-header>\n\n      <ion-content>\n        <ion-img *ngIf=\"selectedRecipe?.imageUrl\" [src]=\"selectedRecipe?.imageUrl\" alt=\"Imagen de la receta\"></ion-img>\n\n        <ion-list>\n          <ion-item>\n            <ion-label>\n              <h2>{{ selectedRecipe?.titulo }}</h2>\n              </ion-label>\n          </ion-item>\n\n          <!-- Mostrar ingredientes y si están en el inventario o no -->\n           \n          <ion-item *ngFor=\"let ing of availableIngredients\">\n            <ion-label>\n              {{ ing.nombre }} - {{ ing.cantidad }} {{ ing.unidad }}\n              <span *ngIf=\"ing.disponible\" style=\"color: green;\">Disponible</span>\n              <span *ngIf=\"!ing.disponible\" style=\"color: red;\">No disponible</span>\n            </ion-label>\n          </ion-item>\n\n           <ion-item>\n           <ion-label>\n            <h2>{{ selectedRecipe?.descripcion }}</h2>\n          </ion-label>\n        </ion-item>\n\n          <!-- Mostrar comentarios -->\n          <ion-item *ngFor=\"let comentarios of selectedRecipe?.comentarios\">\n            <ion-label>\n              <h3>{{ comentarios.comment }}</h3>\n              <p>Calificación promedio: {{ selectedRecipe.averageRating | number: '1.1-1' }}</p>\n              <p>Fecha: {{ comentarios.timestamp | date }}</p>\n            </ion-label>\n          </ion-item>\n        </ion-list>\n\n        <!-- Formulario para agregar comentario y calificación -->\n        <ion-item>\n          <ion-label position=\"floating\">Escribe tu comentario</ion-label>\n          <ion-textarea [(ngModel)]=\"newComment\"></ion-textarea>\n        </ion-item>\n\n        <ion-item>\n          <ion-label>Califica esta receta</ion-label>\n          <ion-range min=\"1\" max=\"5\" step=\"1\" snaps=\"true\" [(ngModel)]=\"newRating\">\n            <ion-icon slot=\"start\" name=\"star-outline\"></ion-icon>\n            <ion-icon slot=\"end\" name=\"star\"></ion-icon>\n          </ion-range>\n        </ion-item>\n\n        <!-- Botón para enviar comentario y calificación -->\n        <ion-button (click)=\"submitComment()\">Enviar</ion-button>\n        <ion-button (click)=\"closeModal()\">Cerrar</ion-button>\n        \n      </ion-content>\n    </ng-template>\n  </ion-modal>\n</ion-content>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}