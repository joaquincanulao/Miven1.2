{"ast":null,"code":"var _FavoritesComponent;\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/fire/compat/auth\";\nimport * as i2 from \"@angular/fire/compat/firestore\";\nimport * as i3 from \"../../services/recipe.service\";\nimport * as i4 from \"../../services/inventory.service\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@ionic/angular\";\nimport * as i8 from \"@angular/forms\";\nfunction FavoritesComponent_ion_card_21_ion_img_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-img\", 13);\n  }\n  if (rf & 2) {\n    const recipe_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"src\", recipe_r2.imageUrl);\n  }\n}\nfunction FavoritesComponent_ion_card_21_ion_button_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 14);\n    i0.ɵɵlistener(\"click\", function FavoritesComponent_ion_card_21_ion_button_12_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const recipe_r2 = i0.ɵɵnextContext().$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.navigateToEdit(recipe_r2.recipeId));\n    });\n    i0.ɵɵtext(1, \" Editar \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction FavoritesComponent_ion_card_21_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-card\");\n    i0.ɵɵtemplate(1, FavoritesComponent_ion_card_21_ion_img_1_Template, 1, 1, \"ion-img\", 8);\n    i0.ɵɵelementStart(2, \"ion-card-header\")(3, \"ion-card-title\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"ion-card-content\");\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"slice\");\n    i0.ɵɵelementStart(8, \"ion-button\", 9);\n    i0.ɵɵlistener(\"click\", function FavoritesComponent_ion_card_21_Template_ion_button_click_8_listener() {\n      const recipe_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.openRecipeModal(recipe_r2));\n    });\n    i0.ɵɵtext(9, \"Ver m\\u00E1s\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"ion-button\", 10);\n    i0.ɵɵlistener(\"click\", function FavoritesComponent_ion_card_21_Template_ion_button_click_10_listener() {\n      const recipe_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.removeFromFavorites(recipe_r2.id));\n    });\n    i0.ɵɵelement(11, \"ion-icon\", 11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(12, FavoritesComponent_ion_card_21_ion_button_12_Template, 2, 0, \"ion-button\", 12);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const recipe_r2 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", recipe_r2.imageUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(recipe_r2.titulo);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind3(7, 6, recipe_r2.descripcion, 0, 100), \"... \");\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"name\", ctx_r2.isFavorite(recipe_r2.id) ? \"heart\" : \"heart-outline\")(\"color\", ctx_r2.isFavorite(recipe_r2.id) ? \"danger\" : \"medium\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", recipe_r2.creadorId === ctx_r2.userId);\n  }\n}\nfunction FavoritesComponent_ng_template_23_ion_img_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-img\", 13);\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"src\", ctx_r2.selectedRecipe == null ? null : ctx_r2.selectedRecipe.imageUrl);\n  }\n}\nfunction FavoritesComponent_ng_template_23_ion_item_14_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 19);\n    i0.ɵɵtext(1, \"Disponible\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction FavoritesComponent_ng_template_23_ion_item_14_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 20);\n    i0.ɵɵtext(1, \"No disponible\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction FavoritesComponent_ng_template_23_ion_item_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\")(1, \"ion-label\");\n    i0.ɵɵtext(2);\n    i0.ɵɵtemplate(3, FavoritesComponent_ng_template_23_ion_item_14_span_3_Template, 2, 0, \"span\", 17)(4, FavoritesComponent_ng_template_23_ion_item_14_span_4_Template, 2, 0, \"span\", 18);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ing_r6 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate3(\" \", ing_r6.nombre, \" - \", ing_r6.cantidad, \" \", ing_r6.unidad, \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ing_r6.disponible);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ing_r6.disponible);\n  }\n}\nfunction FavoritesComponent_ng_template_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-title\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"ion-buttons\", 15)(5, \"ion-button\", 16);\n    i0.ɵɵlistener(\"click\", function FavoritesComponent_ng_template_23_Template_ion_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.closeModal());\n    });\n    i0.ɵɵtext(6, \"Cerrar\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(7, \"ion-content\");\n    i0.ɵɵtemplate(8, FavoritesComponent_ng_template_23_ion_img_8_Template, 1, 1, \"ion-img\", 8);\n    i0.ɵɵelementStart(9, \"ion-list\")(10, \"ion-item\")(11, \"ion-label\")(12, \"h2\");\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(14, FavoritesComponent_ng_template_23_ion_item_14_Template, 5, 5, \"ion-item\", 6);\n    i0.ɵɵelementStart(15, \"ion-item\")(16, \"ion-label\")(17, \"h2\");\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(19, \"ion-button\", 16);\n    i0.ɵɵlistener(\"click\", function FavoritesComponent_ng_template_23_Template_ion_button_click_19_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.closeModal());\n    });\n    i0.ɵɵtext(20, \"Cerrar\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r2.selectedRecipe == null ? null : ctx_r2.selectedRecipe.titulo);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.selectedRecipe == null ? null : ctx_r2.selectedRecipe.imageUrl);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r2.selectedRecipe == null ? null : ctx_r2.selectedRecipe.titulo);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.availableIngredients);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r2.selectedRecipe == null ? null : ctx_r2.selectedRecipe.descripcion);\n  }\n}\nexport class FavoritesComponent {\n  constructor(auth, firestore, recipeService, inventoryService, router) {\n    this.auth = auth;\n    this.firestore = firestore;\n    this.recipeService = recipeService;\n    this.inventoryService = inventoryService;\n    this.router = router;\n    this.userId = null;\n    this.favorites = []; // Aquí se almacenan todas las recetas favoritas\n    this.filteredFavorites = []; // Recetas filtradas por categoría\n    this.isModalOpen = false;\n    this.selectedRecipe = null;\n    this.selectedCategory = 'desayuno'; // Categoría seleccionada por defecto\n    this.isAuthenticated = false;\n    this.availableIngredients = [];\n    console.log(' en cosntruct');\n  }\n  ngOnInit() {\n    this.auth.authState.subscribe(user => {\n      this.isAuthenticated = !!user;\n      console.log(' isAuthenticated subscribe :: ', this.isAuthenticated);\n      if (this.isAuthenticated) {\n        if (user && user.uid) {\n          this.userId = user.uid;\n          this.filterFavorites();\n        }\n      }\n    });\n  }\n  // Método para filtrar las recetas según la categoría seleccionada\n  filterFavorites() {\n    console.log(' this === ', this.userId);\n    if (this.userId) {\n      this.filteredFavorites = [];\n      const favoritos = this.firestore.collection('usuarios').doc(this.userId).collection('favoritos', ref => ref.where('category', '==', this.selectedCategory));\n      favoritos.get().forEach(querySnapshot => {\n        querySnapshot.forEach(doc => {\n          const datos = doc.data();\n          console.log('datos  ID :: ', doc.id);\n          this.firestore.collection('recetas').doc(datos['recipeId']).get().forEach(rec => {\n            const d = rec.data();\n            d.id = doc.id;\n            this.filteredFavorites.push(d);\n            // console.log('receta :: ', d)\n          });\n        });\n        // console.log('Favoritos filtrados:', this.filteredFavorites);\n      });\n    }\n  }\n  openRecipeModal(recipe) {\n    this.selectedRecipe = recipe;\n    this.checkIngredientsAvailability(recipe.ingredientes);\n    this.recipeService.getRecipeCommentsWithUser(recipe.id).subscribe(comments => {\n      this.selectedRecipe.comentarios = comments;\n    });\n    this.isModalOpen = true;\n  }\n  // Método para cerrar el modal\n  closeModal() {\n    this.isModalOpen = false;\n    this.selectedRecipe = null;\n  }\n  removeFromFavorites(recipeId) {\n    console.log('recipeId :: ', recipeId);\n    if (this.userId) {\n      const favoritos = this.firestore.collection('usuarios').doc(this.userId).collection('favoritos').doc(recipeId).delete();\n      this.filterFavorites();\n    }\n  }\n  checkIngredientsAvailability(recipeIngredients) {\n    if (this.userId) {\n      this.inventoryService.getInventory(this.userId).subscribe(inventory => {\n        this.availableIngredients = recipeIngredients.map(ingredient => {\n          const inventoryItem = inventory.find(item => {\n            var _item$nombre, _ingredient$nombre;\n            return (item === null || item === void 0 || (_item$nombre = item.nombre) === null || _item$nombre === void 0 ? void 0 : _item$nombre.toLowerCase()) === (ingredient === null || ingredient === void 0 || (_ingredient$nombre = ingredient.nombre) === null || _ingredient$nombre === void 0 ? void 0 : _ingredient$nombre.toLowerCase());\n          });\n          return {\n            nombre: ingredient.nombre,\n            cantidad: ingredient.cantidad,\n            unidad: ingredient.unidad,\n            disponible: inventoryItem ? inventoryItem.cantidad >= ingredient.cantidad : false\n          };\n        });\n      });\n    }\n  }\n  isFavorite(recipeId) {\n    return this.favorites.some(fav => fav.recipeId === recipeId);\n  }\n  navigateToEdit(recipeId) {\n    // Navegar a la página de edición de recetas\n    this.router.navigate(['/edit-recipe', recipeId]);\n  }\n}\n_FavoritesComponent = FavoritesComponent;\n_FavoritesComponent.ɵfac = function FavoritesComponent_Factory(__ngFactoryType__) {\n  return new (__ngFactoryType__ || _FavoritesComponent)(i0.ɵɵdirectiveInject(i1.AngularFireAuth), i0.ɵɵdirectiveInject(i2.AngularFirestore), i0.ɵɵdirectiveInject(i3.RecipeService), i0.ɵɵdirectiveInject(i4.InventoryService), i0.ɵɵdirectiveInject(i5.Router));\n};\n_FavoritesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _FavoritesComponent,\n  selectors: [[\"app-favorites\"]],\n  decls: 24,\n  vars: 3,\n  consts: [[\"slot\", \"start\"], [3, \"ngModelChange\", \"ionChange\", \"ngModel\"], [\"value\", \"desayuno\"], [\"value\", \"almuerzo\"], [\"value\", \"cena\"], [\"value\", \"postre\"], [4, \"ngFor\", \"ngForOf\"], [3, \"didDismiss\", \"isOpen\"], [\"alt\", \"Imagen de la receta\", 3, \"src\", 4, \"ngIf\"], [\"fill\", \"clear\", 3, \"click\"], [\"fill\", \"clear\", \"color\", \"danger\", 3, \"click\"], [3, \"name\", \"color\"], [\"color\", \"primary\", 3, \"click\", 4, \"ngIf\"], [\"alt\", \"Imagen de la receta\", 3, \"src\"], [\"color\", \"primary\", 3, \"click\"], [\"slot\", \"end\"], [3, \"click\"], [\"style\", \"color: green;\", 4, \"ngIf\"], [\"style\", \"color: red;\", 4, \"ngIf\"], [2, \"color\", \"green\"], [2, \"color\", \"red\"]],\n  template: function FavoritesComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-buttons\", 0);\n      i0.ɵɵelement(2, \"ion-menu-button\");\n      i0.ɵɵelementStart(3, \"ion-title\");\n      i0.ɵɵtext(4, \"Recetas Favoritas\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(5, \"ion-toolbar\")(6, \"ion-segment\", 1);\n      i0.ɵɵtwoWayListener(\"ngModelChange\", function FavoritesComponent_Template_ion_segment_ngModelChange_6_listener($event) {\n        i0.ɵɵtwoWayBindingSet(ctx.selectedCategory, $event) || (ctx.selectedCategory = $event);\n        return $event;\n      });\n      i0.ɵɵlistener(\"ionChange\", function FavoritesComponent_Template_ion_segment_ionChange_6_listener() {\n        return ctx.filterFavorites();\n      });\n      i0.ɵɵelementStart(7, \"ion-segment-button\", 2)(8, \"ion-label\");\n      i0.ɵɵtext(9, \"Desayuno\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(10, \"ion-segment-button\", 3)(11, \"ion-label\");\n      i0.ɵɵtext(12, \"Almuerzo\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(13, \"ion-segment-button\", 4)(14, \"ion-label\");\n      i0.ɵɵtext(15, \"Cena\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(16, \"ion-segment-button\", 5)(17, \"ion-label\");\n      i0.ɵɵtext(18, \"Postre\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(19, \"ion-content\")(20, \"ion-list\");\n      i0.ɵɵtemplate(21, FavoritesComponent_ion_card_21_Template, 13, 10, \"ion-card\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"ion-modal\", 7);\n      i0.ɵɵlistener(\"didDismiss\", function FavoritesComponent_Template_ion_modal_didDismiss_22_listener() {\n        return ctx.closeModal();\n      });\n      i0.ɵɵtemplate(23, FavoritesComponent_ng_template_23_Template, 21, 5, \"ng-template\");\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(6);\n      i0.ɵɵtwoWayProperty(\"ngModel\", ctx.selectedCategory);\n      i0.ɵɵadvance(15);\n      i0.ɵɵproperty(\"ngForOf\", ctx.filteredFavorites);\n      i0.ɵɵadvance();\n      i0.ɵɵproperty(\"isOpen\", ctx.isModalOpen);\n    }\n  },\n  dependencies: [i6.NgForOf, i6.NgIf, i7.IonButton, i7.IonButtons, i7.IonCard, i7.IonCardContent, i7.IonCardHeader, i7.IonCardTitle, i7.IonContent, i7.IonHeader, i7.IonIcon, i7.IonImg, i7.IonItem, i7.IonLabel, i7.IonList, i7.IonMenuButton, i7.IonSegment, i7.IonSegmentButton, i7.IonTitle, i7.IonToolbar, i7.IonModal, i7.SelectValueAccessor, i8.NgControlStatus, i8.NgModel, i6.SlicePipe],\n  styles: [\".delete-button[_ngcontent-%COMP%] {\\n  position: absolute;\\n  top: 5px;\\n  right: 5px;\\n  background: none;\\n  border: none;\\n  color: red;\\n  font-size: 10px;\\n  cursor: pointer;\\n  padding: 0;\\n  \\n\\n}\\n.delete-button[_ngcontent-%COMP%]:hover {\\n  color: darkred;\\n  transform: scale(1);\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9mYXZvcml0ZXMvZmF2b3JpdGVzLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBO0VBQ0ksa0JBQUE7RUFDQSxRQUFBO0VBQ0EsVUFBQTtFQUNBLGdCQUFBO0VBQ0EsWUFBQTtFQUNBLFVBQUE7RUFDQSxlQUFBO0VBQ0EsZUFBQTtFQUNBLFVBQUE7RUFFRSwyREFBQTtBQUROO0FBRUU7RUFDRSxjQUFBO0VBQ0EsbUJBQUE7QUFBSiIsInNvdXJjZXNDb250ZW50IjpbIlxuLmRlbGV0ZS1idXR0b24ge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDVweDtcbiAgICByaWdodDogNXB4O1xuICAgIGJhY2tncm91bmQ6IG5vbmU7XG4gICAgYm9yZGVyOiBub25lO1xuICAgIGNvbG9yOiByZWQ7XG4gICAgZm9udC1zaXplOiAxMHB4O1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBwYWRkaW5nOiAwO1xuXG4gICAgICAvKiBPcGNpb25hbDogYWdyZWdhciB1biBob3ZlciBwYXJhIG1lam9yYXIgbGEgZXhwZXJpZW5jaWEgKi9cbiAgJjpob3ZlciB7XG4gICAgY29sb3I6IGRhcmtyZWQ7XG4gICAgdHJhbnNmb3JtOiBzY2FsZSgxKTtcbiAgfVxufSAgIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["i0","ɵɵelement","ɵɵproperty","recipe_r2","imageUrl","ɵɵelementStart","ɵɵlistener","FavoritesComponent_ion_card_21_ion_button_12_Template_ion_button_click_0_listener","ɵɵrestoreView","_r4","ɵɵnextContext","$implicit","ctx_r2","ɵɵresetView","navigateToEdit","recipeId","ɵɵtext","ɵɵelementEnd","ɵɵtemplate","FavoritesComponent_ion_card_21_ion_img_1_Template","FavoritesComponent_ion_card_21_Template_ion_button_click_8_listener","_r1","openRecipeModal","FavoritesComponent_ion_card_21_Template_ion_button_click_10_listener","removeFromFavorites","id","FavoritesComponent_ion_card_21_ion_button_12_Template","ɵɵadvance","ɵɵtextInterpolate","titulo","ɵɵtextInterpolate1","ɵɵpipeBind3","descripcion","isFavorite","creadorId","userId","selectedRecipe","FavoritesComponent_ng_template_23_ion_item_14_span_3_Template","FavoritesComponent_ng_template_23_ion_item_14_span_4_Template","ɵɵtextInterpolate3","ing_r6","nombre","cantidad","unidad","disponible","FavoritesComponent_ng_template_23_Template_ion_button_click_5_listener","_r5","closeModal","FavoritesComponent_ng_template_23_ion_img_8_Template","FavoritesComponent_ng_template_23_ion_item_14_Template","FavoritesComponent_ng_template_23_Template_ion_button_click_19_listener","availableIngredients","FavoritesComponent","constructor","auth","firestore","recipeService","inventoryService","router","favorites","filteredFavorites","isModalOpen","selectedCategory","isAuthenticated","console","log","ngOnInit","authState","subscribe","user","uid","filterFavorites","favoritos","collection","doc","ref","where","get","forEach","querySnapshot","datos","data","rec","d","push","recipe","checkIngredientsAvailability","ingredientes","getRecipeCommentsWithUser","comments","comentarios","delete","recipeIngredients","getInventory","inventory","map","ingredient","inventoryItem","find","item","_item$nombre","_ingredient$nombre","toLowerCase","some","fav","navigate","ɵɵdirectiveInject","i1","AngularFireAuth","i2","AngularFirestore","i3","RecipeService","i4","InventoryService","i5","Router","selectors","decls","vars","consts","template","FavoritesComponent_Template","rf","ctx","ɵɵtwoWayListener","FavoritesComponent_Template_ion_segment_ngModelChange_6_listener","$event","ɵɵtwoWayBindingSet","FavoritesComponent_Template_ion_segment_ionChange_6_listener","FavoritesComponent_ion_card_21_Template","FavoritesComponent_Template_ion_modal_didDismiss_22_listener","FavoritesComponent_ng_template_23_Template","ɵɵtwoWayProperty"],"sources":["/home/jcanulao/Documentos/Miven1.0.0-main/src/app/components/favorites/favorites.component.ts","/home/jcanulao/Documentos/Miven1.0.0-main/src/app/components/favorites/favorites.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { AngularFirestore } from '@angular/fire/compat/firestore';\nimport { AngularFireAuth } from '@angular/fire/compat/auth';\nimport { RecipeService } from '../../services/recipe.service';\nimport { InventoryService } from '../../services/inventory.service';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-favorites',\n  templateUrl: './favorites.component.html',\n  styleUrls: ['./favorites.component.scss'],\n})\n\nexport class FavoritesComponent implements OnInit {\n  userId: string | null = null;\n  favorites: any[] = []; // Aquí se almacenan todas las recetas favoritas\n  filteredFavorites: any[] = []; // Recetas filtradas por categoría\n  isModalOpen = false;\n  selectedRecipe: any | null = null;\n  selectedCategory = 'desayuno'; // Categoría seleccionada por defecto\n  isAuthenticated: boolean = false;\n  availableIngredients: any[] = [];\n\n  constructor(\n    private auth: AngularFireAuth,\n    private firestore: AngularFirestore,\n    private recipeService: RecipeService, \n    private inventoryService: InventoryService,\n    private router: Router,\n  ) {\n    console.log(' en cosntruct')\n\n  }\n     ngOnInit(): void {\n       this.auth.authState.subscribe(user => {\n         this.isAuthenticated = !!user;\n         console.log(' isAuthenticated subscribe :: ', this.isAuthenticated);\n          if (this.isAuthenticated ) {\n            if (user && user.uid) {\n              this.userId = user.uid;\n              this.filterFavorites()\n            }\n          }\n       });\n\n     }\n     \n  // Método para filtrar las recetas según la categoría seleccionada\n  filterFavorites() {\n    console.log(' this === ', this.userId)\n\n    if (this.userId) {   \n      this.filteredFavorites = [];\n      const favoritos = this.firestore.collection('usuarios').doc(this.userId).collection('favoritos'\n        , ref => ref.where('category', '==', this.selectedCategory)\n      );\n      favoritos.get().forEach((querySnapshot) => {\n        querySnapshot.forEach((doc) => {\n          const datos = doc.data();\n          console.log('datos  ID :: ', doc.id)\n          this.firestore.collection('recetas').doc(datos['recipeId']).get().forEach(\n            (rec) => {\n              const d : any = rec.data();\n              d.id = doc.id\n              this.filteredFavorites.push(d);\n              // console.log('receta :: ', d)\n            }\n          );\n        })\n        // console.log('Favoritos filtrados:', this.filteredFavorites);\n        })\n\n  }\n}\n\nopenRecipeModal(recipe: any) {\n  this.selectedRecipe = recipe;\n  this.checkIngredientsAvailability(recipe.ingredientes);\n  this.recipeService.getRecipeCommentsWithUser(recipe.id).subscribe((comments: any[]) => {\n    this.selectedRecipe.comentarios = comments;\n  });\n  this.isModalOpen = true;\n}\n\n  // Método para cerrar el modal\n  closeModal() {\n    this.isModalOpen = false;\n    this.selectedRecipe = null;\n  }\n\n  removeFromFavorites(recipeId: string) {\n    console.log( 'recipeId :: ', recipeId)\n    if (this.userId) {  \n      const favoritos = this.firestore.collection('usuarios').doc(this.userId).collection('favoritos').doc(recipeId).delete()\n      this.filterFavorites()\n    }\n \n    \n  }\n  checkIngredientsAvailability(recipeIngredients: { nombre: string; cantidad: number; unidad: string }[]) {\n    if (this.userId) {\n      this.inventoryService.getInventory(this.userId).subscribe(inventory => {\n        this.availableIngredients = recipeIngredients.map(ingredient => {\n          const inventoryItem = inventory.find(item => \n            item?.nombre?.toLowerCase() === ingredient?.nombre?.toLowerCase()\n          );\n          return {\n            nombre: ingredient.nombre,\n            cantidad: ingredient.cantidad,\n            unidad: ingredient.unidad,\n            disponible: inventoryItem ? inventoryItem.cantidad >= ingredient.cantidad : false\n\n          };\n        });\n      });\n    }\n  }\n  \n  isFavorite(recipeId: string): boolean {\n    return this.favorites.some(fav => fav.recipeId === recipeId);\n  }\n  navigateToEdit(recipeId: string) {\n    // Navegar a la página de edición de recetas\n    this.router.navigate(['/edit-recipe', recipeId]);\n  }\n}\n","<ion-header>\n   <ion-buttons slot=\"start\">\n     <ion-menu-button></ion-menu-button>\n   <ion-title>Recetas Favoritas</ion-title>\n   </ion-buttons>\n</ion-header>\n\n<ion-toolbar>\n    \n    <ion-segment [(ngModel)]=\"selectedCategory\" (ionChange)=\"filterFavorites()\">\n      <ion-segment-button value=\"desayuno\">\n        <ion-label>Desayuno</ion-label>\n      </ion-segment-button>\n      <ion-segment-button value=\"almuerzo\">\n        <ion-label>Almuerzo</ion-label>\n      </ion-segment-button>\n      <ion-segment-button value=\"cena\">\n        <ion-label>Cena</ion-label>\n      </ion-segment-button>\n      <ion-segment-button value=\"postre\">\n        <ion-label>Postre</ion-label>\n      </ion-segment-button>\n    </ion-segment>\n  \n  </ion-toolbar>\n\n<!-- {{ filteredFavorites | json }} -->\n<ion-content>\n  <ion-list>\n    <!-- Iterar sobre las recetas favoritas filtradas -->\n    <ion-card *ngFor=\"let recipe of filteredFavorites\">\n      <ion-img *ngIf=\"recipe.imageUrl\" [src]=\"recipe.imageUrl\" alt=\"Imagen de la receta\"></ion-img>\n\n      <ion-card-header>\n        <ion-card-title>{{ recipe.titulo }}</ion-card-title>\n      </ion-card-header>\n\n      <ion-card-content>\n        <!-- {{ recipe  | json}} -->\n        <!-- Mostrar una descripción corta -->\n        {{ recipe.descripcion | slice: 0:100 }}...\n\n        <!-- Botones para ver más y eliminar de favoritos -->\n        <ion-button fill=\"clear\" (click)=\"openRecipeModal(recipe)\">Ver más</ion-button>\n        <ion-button fill=\"clear\" color=\"danger\" (click)=\"removeFromFavorites(recipe.id)\">\n\n          <ion-icon \n          [name]=\"isFavorite(recipe.id) ? 'heart' : 'heart-outline'\" \n          [color]=\"isFavorite(recipe.id) ? 'danger' : 'medium'\">\n        </ion-icon>\n      </ion-button>\n      <ion-button *ngIf=\"recipe.creadorId === userId\" \n      (click)=\"navigateToEdit(recipe.recipeId)\" color=\"primary\">\n        Editar\n      </ion-button>\n      </ion-card-content>\n    </ion-card>\n  </ion-list>\n\n  <!-- Modal de detalles de la receta -->\n  <ion-modal [isOpen]=\"isModalOpen\" (didDismiss)=\"closeModal()\">\n    <ng-template>\n      <ion-header>\n        <ion-toolbar>\n          <ion-title>{{ selectedRecipe?.titulo }}</ion-title>\n          <ion-buttons slot=\"end\">\n            <ion-button (click)=\"closeModal()\">Cerrar</ion-button>\n          </ion-buttons>\n        </ion-toolbar>\n      </ion-header>\n\n      <ion-content>\n        <ion-img *ngIf=\"selectedRecipe?.imageUrl\" [src]=\"selectedRecipe?.imageUrl\" alt=\"Imagen de la receta\"></ion-img>\n\n        <ion-list>\n          <ion-item>\n            <ion-label>\n              <h2>{{ selectedRecipe?.titulo }}</h2>\n            </ion-label>\n          </ion-item>\n\n          <!-- Descripción completa -->\n\n          <ion-item *ngFor=\"let ing of availableIngredients\">\n            <ion-label>\n              {{ ing.nombre }} - {{ ing.cantidad }} {{ ing.unidad }}\n              <span *ngIf=\"ing.disponible\" style=\"color: green;\">Disponible</span>\n              <span *ngIf=\"!ing.disponible\" style=\"color: red;\">No disponible</span>\n            </ion-label>\n          </ion-item>\n\n\n    <ion-item>\n         <ion-label>\n          <h2>{{ selectedRecipe?.descripcion }}</h2>\n        </ion-label>\n      </ion-item>\n\n    \n    </ion-list>\n\n        <ion-button (click)=\"closeModal()\">Cerrar</ion-button>\n      </ion-content>\n    </ng-template>\n  </ion-modal>\n</ion-content>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}