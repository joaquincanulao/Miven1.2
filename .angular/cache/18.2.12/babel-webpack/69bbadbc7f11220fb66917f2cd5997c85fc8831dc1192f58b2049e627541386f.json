{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/fire/compat/firestore\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@ionic/angular\";\nimport * as i4 from \"@angular/router\";\nfunction HomePage_div_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"ion-card\")(2, \"ion-card-header\")(3, \"ion-card-title\");\n    i0.ɵɵtext(4, \"Receta M\\u00E1s Popular\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"ion-card-content\")(6, \"h1\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(8, \"img\", 8);\n    i0.ɵɵelementStart(9, \"p\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"ion-button\", 9);\n    i0.ɵɵtext(12, \"Ver Receta\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(ctx_r0.popularRecipe.titulo);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"src\", ctx_r0.popularRecipe.imageUrl, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Calificaci\\u00F3n: \", ctx_r0.popularRecipe.rating, \" / 5\");\n    i0.ɵɵadvance();\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/recipe/\", ctx_r0.popularRecipe.id, \"\");\n  }\n}\nexport let HomePage = /*#__PURE__*/(() => {\n  var _HomePage;\n  class HomePage {\n    constructor(firestore) {\n      this.firestore = firestore;\n      this.tips = [];\n      this.currentTip = '';\n      this.popularRecipe = null;\n    }\n    ngOnInit() {\n      this.loadTips(); // Cargar consejos desde Firestore\n      setInterval(() => {\n        this.showRandomTip();\n      }, 10000); // esto cambia consejo cada 10s...\n      this.loadPopularRecipe();\n    }\n    loadTips() {\n      console.log('Intentando cargar los consejos...');\n      this.firestore.collection('consejos').valueChanges().subscribe({\n        next: data => {\n          console.log('Datos recibidos:', data);\n          this.tips = data.map(item => item.e);\n          this.showRandomTip();\n        },\n        error: error => {\n          console.error('Error al cargar los consejos:', error);\n        }\n      });\n    }\n    // Mostrar un consejo aleatorio\n    showRandomTip() {\n      if (this.tips.length > 0) {\n        const randomIndex = Math.floor(Math.random() * this.tips.length);\n        this.currentTip = this.tips[randomIndex];\n      }\n    }\n    loadPopularRecipe() {\n      this.firestore.collection('recetas', ref => ref.orderBy('rating', 'desc').limit(1)).valueChanges({\n        idField: 'id'\n      }).subscribe({\n        next: data => {\n          if (data.length > 0) {\n            this.popularRecipe = data[0];\n            console.log('Receta más popular:', this.popularRecipe);\n          } else {\n            console.warn('No se encontraron recetas populares.');\n          }\n        },\n        error: error => {\n          console.error('Error al cargar la receta más popular:', error);\n        }\n      });\n    }\n  }\n  _HomePage = HomePage;\n  _HomePage.ɵfac = function HomePage_Factory(__ngFactoryType__) {\n    return new (__ngFactoryType__ || _HomePage)(i0.ɵɵdirectiveInject(i1.AngularFirestore));\n  };\n  _HomePage.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: _HomePage,\n    selectors: [[\"app-home\"]],\n    decls: 32,\n    vars: 2,\n    consts: [[\"slot\", \"start\"], [1, \"ion-padding\"], [1, \"welcome-message\"], [\"expand\", \"full\", \"routerLink\", \"/inventory\"], [1, \"food-tips-container\"], [\"expand\", \"block\", 3, \"click\"], [\"class\", \"popular-recipe-container\", 4, \"ngIf\"], [1, \"popular-recipe-container\"], [\"alt\", \"Imagen de la receta\", 1, \"popular-recipe-image\", 3, \"src\"], [\"expand\", \"block\", 3, \"routerLink\"]],\n    template: function HomePage_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-buttons\", 0);\n        i0.ɵɵelement(2, \"ion-menu-button\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"ion-toolbar\")(4, \"ion-title\");\n        i0.ɵɵtext(5, \"Bienvenido a Miven\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(6, \"ion-content\", 1)(7, \"div\", 2)(8, \"ion-card\")(9, \"ion-card-header\")(10, \"ion-card-title\");\n        i0.ɵɵtext(11, \"Bienvenido a Miven\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(12, \"ion-card-content\")(13, \"p\");\n        i0.ɵɵtext(14, \" Miven es una aplicaci\\u00F3n que te permite gestionar tu inventario de alimentos y, al mismo tiempo, lo vincula con recetas. Aqu\\u00ED puedes ver recetas de otros usuarios, as\\u00ED como crear tus propias recetas. \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"p\");\n        i0.ɵɵtext(16, \" Cada vez que consultes una receta, autom\\u00E1ticamente te informaremos si tienes los ingredientes necesarios en tu inventario. \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"p\");\n        i0.ɵɵtext(18, \" \\u00A1Explora recetas, gestiona tu inventario y disfruta de una experiencia culinaria conectada con Miven! \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"ion-button\", 3);\n        i0.ɵɵtext(20, \"Gestionar Inventario\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(21, \"div\", 4)(22, \"ion-card\")(23, \"ion-card-header\")(24, \"ion-card-title\");\n        i0.ɵɵtext(25, \"Consejo del D\\u00EDa\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(26, \"ion-card-content\")(27, \"p\");\n        i0.ɵɵtext(28);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"ion-button\", 5);\n        i0.ɵɵlistener(\"click\", function HomePage_Template_ion_button_click_29_listener() {\n          return ctx.showRandomTip();\n        });\n        i0.ɵɵtext(30, \"Siguiente Consejo\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵtemplate(31, HomePage_div_31_Template, 13, 5, \"div\", 6);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(28);\n        i0.ɵɵtextInterpolate(ctx.currentTip || \"Cargando consejo...\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.popularRecipe);\n      }\n    },\n    dependencies: [i2.NgIf, i3.IonButton, i3.IonButtons, i3.IonCard, i3.IonCardContent, i3.IonCardHeader, i3.IonCardTitle, i3.IonContent, i3.IonHeader, i3.IonMenuButton, i3.IonTitle, i3.IonToolbar, i3.RouterLinkDelegate, i4.RouterLink],\n    styles: [\".welcome-message[_ngcontent-%COMP%]{text-align:center;margin-top:50px}.welcome-message[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px;font-weight:700}.welcome-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;margin:15px 0}ion-button[_ngcontent-%COMP%]{margin-top:20px}\"]\n  });\n  return HomePage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}