{"ast":null,"code":"var _FavoritesComponent;\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/fire/compat/auth\";\nimport * as i2 from \"@angular/fire/compat/firestore\";\nimport * as i3 from \"../../services/recipe.service\";\nimport * as i4 from \"../../services/inventory.service\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@ionic/angular\";\nimport * as i8 from \"@angular/forms\";\nfunction FavoritesComponent_ion_card_21_ion_img_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-img\", 12);\n  }\n  if (rf & 2) {\n    const recipe_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"src\", recipe_r2.imageUrl);\n  }\n}\nfunction FavoritesComponent_ion_card_21_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-card\");\n    i0.ɵɵtemplate(1, FavoritesComponent_ion_card_21_ion_img_1_Template, 1, 1, \"ion-img\", 8);\n    i0.ɵɵelementStart(2, \"ion-card-header\")(3, \"ion-card-title\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"ion-card-content\");\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"slice\");\n    i0.ɵɵelementStart(8, \"ion-button\", 9);\n    i0.ɵɵlistener(\"click\", function FavoritesComponent_ion_card_21_Template_ion_button_click_8_listener() {\n      const recipe_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.openRecipeModal(recipe_r2));\n    });\n    i0.ɵɵtext(9, \"Ver m\\u00E1s\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"ion-button\", 10);\n    i0.ɵɵlistener(\"click\", function FavoritesComponent_ion_card_21_Template_ion_button_click_10_listener() {\n      const recipe_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.removeFromFavorites(recipe_r2.id));\n    });\n    i0.ɵɵelement(11, \"ion-icon\", 11);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const recipe_r2 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", recipe_r2.imageUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(recipe_r2.titulo);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind3(7, 5, recipe_r2.descripcion, 0, 100), \"... \");\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"name\", ctx_r2.isFavorite(recipe_r2.id) ? \"heart\" : \"heart-outline\")(\"color\", ctx_r2.isFavorite(recipe_r2.id) ? \"danger\" : \"medium\");\n  }\n}\nfunction FavoritesComponent_ng_template_23_ion_button_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 14);\n    i0.ɵɵlistener(\"click\", function FavoritesComponent_ng_template_23_ion_button_7_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r2 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r2.editRecipe(ctx_r2.recipe.id));\n    });\n    i0.ɵɵtext(1, \" Editar Receta \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction FavoritesComponent_ng_template_23_ion_img_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-img\", 12);\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"src\", ctx_r2.selectedRecipe == null ? null : ctx_r2.selectedRecipe.imageUrl);\n  }\n}\nfunction FavoritesComponent_ng_template_23_ion_item_15_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 18);\n    i0.ɵɵtext(1, \"Disponible\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction FavoritesComponent_ng_template_23_ion_item_15_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 19);\n    i0.ɵɵtext(1, \"No disponible\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction FavoritesComponent_ng_template_23_ion_item_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\")(1, \"ion-label\");\n    i0.ɵɵtext(2);\n    i0.ɵɵtemplate(3, FavoritesComponent_ng_template_23_ion_item_15_span_3_Template, 2, 0, \"span\", 16)(4, FavoritesComponent_ng_template_23_ion_item_15_span_4_Template, 2, 0, \"span\", 17);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ing_r6 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate3(\" \", ing_r6.nombre, \" - \", ing_r6.cantidad, \" \", ing_r6.unidad, \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ing_r6.disponible);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", !ing_r6.disponible);\n  }\n}\nfunction FavoritesComponent_ng_template_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-title\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"ion-buttons\", 13)(5, \"ion-button\", 14);\n    i0.ɵɵlistener(\"click\", function FavoritesComponent_ng_template_23_Template_ion_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.closeModal());\n    });\n    i0.ɵɵtext(6, \"Cerrar\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, FavoritesComponent_ng_template_23_ion_button_7_Template, 2, 0, \"ion-button\", 15);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(8, \"ion-content\");\n    i0.ɵɵtemplate(9, FavoritesComponent_ng_template_23_ion_img_9_Template, 1, 1, \"ion-img\", 8);\n    i0.ɵɵelementStart(10, \"ion-list\")(11, \"ion-item\")(12, \"ion-label\")(13, \"h2\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(15, FavoritesComponent_ng_template_23_ion_item_15_Template, 5, 5, \"ion-item\", 6);\n    i0.ɵɵelementStart(16, \"ion-item\")(17, \"ion-label\")(18, \"h2\");\n    i0.ɵɵtext(19);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(20, \"ion-button\", 14);\n    i0.ɵɵlistener(\"click\", function FavoritesComponent_ng_template_23_Template_ion_button_click_20_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.closeModal());\n    });\n    i0.ɵɵtext(21, \"Cerrar\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r2.selectedRecipe == null ? null : ctx_r2.selectedRecipe.titulo);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.recipe.creadorId === ctx_r2.userId);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.selectedRecipe == null ? null : ctx_r2.selectedRecipe.imageUrl);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r2.selectedRecipe == null ? null : ctx_r2.selectedRecipe.titulo);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.availableIngredients);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r2.selectedRecipe == null ? null : ctx_r2.selectedRecipe.descripcion);\n  }\n}\nexport class FavoritesComponent {\n  constructor(auth, firestore, recipeService, inventoryService, router) {\n    this.auth = auth;\n    this.firestore = firestore;\n    this.recipeService = recipeService;\n    this.inventoryService = inventoryService;\n    this.router = router;\n    this.userId = null;\n    this.favorites = []; // Aquí se almacenan todas las recetas favoritas\n    this.filteredFavorites = []; // Recetas filtradas por categoría\n    this.isModalOpen = false;\n    this.selectedRecipe = null;\n    this.selectedCategory = 'desayuno'; // Categoría seleccionada por defecto\n    this.isAuthenticated = false;\n    this.availableIngredients = [];\n    console.log('en construct');\n  }\n  ngOnInit() {\n    this.auth.authState.subscribe(user => {\n      this.isAuthenticated = !!user;\n      console.log('isAuthenticated subscribe :: ', this.isAuthenticated);\n      if (this.isAuthenticated) {\n        if (user && user.uid) {\n          this.userId = user.uid;\n          this.filterFavorites();\n        }\n      }\n    });\n  }\n  // Método para filtrar las recetas según la categoría seleccionada\n  filterFavorites() {\n    console.log('this === ', this.userId);\n    if (this.userId) {\n      this.filteredFavorites = [];\n      const favoritos = this.firestore.collection('usuarios').doc(this.userId).collection('favoritos', ref => ref.where('category', '==', this.selectedCategory));\n      favoritos.get().forEach(querySnapshot => {\n        querySnapshot.forEach(doc => {\n          const datos = doc.data();\n          console.log('datos ID :: ', doc.id);\n          this.firestore.collection('recetas').doc(datos['recipeId']).get().forEach(rec => {\n            const d = rec.data();\n            d.id = doc.id;\n            d.creadorId = datos['creadorId'];\n            this.filteredFavorites.push(d);\n          });\n        });\n      });\n    }\n  }\n  openRecipeModal(recipe) {\n    this.selectedRecipe = recipe;\n    this.checkIngredientsAvailability(recipe.ingredientes);\n    this.recipeService.getRecipeCommentsWithUser(recipe.id).subscribe(comments => {\n      this.selectedRecipe.comentarios = comments;\n    });\n    this.isModalOpen = true;\n  }\n  // Método para cerrar el modal\n  closeModal() {\n    this.isModalOpen = false;\n    this.selectedRecipe = null;\n  }\n  removeFromFavorites(recipeId) {\n    console.log('recipeId :: ', recipeId);\n    if (this.userId) {\n      this.firestore.collection('usuarios').doc(this.userId).collection('favoritos').doc(recipeId).delete();\n      this.filterFavorites();\n    }\n  }\n  checkIngredientsAvailability(recipeIngredients) {\n    if (this.userId) {\n      this.inventoryService.getInventory(this.userId).subscribe(inventory => {\n        this.availableIngredients = recipeIngredients.map(ingredient => {\n          const inventoryItem = inventory.find(item => {\n            var _item$nombre, _ingredient$nombre;\n            return (item === null || item === void 0 || (_item$nombre = item.nombre) === null || _item$nombre === void 0 ? void 0 : _item$nombre.toLowerCase()) === (ingredient === null || ingredient === void 0 || (_ingredient$nombre = ingredient.nombre) === null || _ingredient$nombre === void 0 ? void 0 : _ingredient$nombre.toLowerCase());\n          });\n          return {\n            nombre: ingredient.nombre,\n            cantidad: ingredient.cantidad,\n            unidad: ingredient.unidad,\n            disponible: inventoryItem ? inventoryItem.cantidad >= ingredient.cantidad : false\n          };\n        });\n      });\n    }\n  }\n  isFavorite(recipeId) {\n    return this.favorites.some(fav => fav.recipeId === recipeId);\n  }\n  // Nuevo método para editar receta\n  editRecipe(recipeId) {\n    if (this.userId) {\n      this.firestore.collection('recetas').doc(recipeId).get().subscribe(doc => {\n        if (doc.exists) {\n          const recipeData = doc.data();\n          if (recipeData.creadorId === this.userId) {\n            console.log('Navegar a editar receta: ', recipeId);\n            this.router.navigate(['/edit-recipe', recipeId]);\n          } else {\n            console.error('No tienes permisos para editar esta receta');\n          }\n        }\n      });\n    }\n  }\n}\n_FavoritesComponent = FavoritesComponent;\n_FavoritesComponent.ɵfac = function FavoritesComponent_Factory(__ngFactoryType__) {\n  return new (__ngFactoryType__ || _FavoritesComponent)(i0.ɵɵdirectiveInject(i1.AngularFireAuth), i0.ɵɵdirectiveInject(i2.AngularFirestore), i0.ɵɵdirectiveInject(i3.RecipeService), i0.ɵɵdirectiveInject(i4.InventoryService), i0.ɵɵdirectiveInject(i5.Router));\n};\n_FavoritesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _FavoritesComponent,\n  selectors: [[\"app-favorites\"]],\n  decls: 24,\n  vars: 3,\n  consts: [[\"slot\", \"start\"], [3, \"ngModelChange\", \"ionChange\", \"ngModel\"], [\"value\", \"desayuno\"], [\"value\", \"almuerzo\"], [\"value\", \"cena\"], [\"value\", \"postre\"], [4, \"ngFor\", \"ngForOf\"], [3, \"didDismiss\", \"isOpen\"], [\"alt\", \"Imagen de la receta\", 3, \"src\", 4, \"ngIf\"], [\"fill\", \"clear\", 3, \"click\"], [\"fill\", \"clear\", \"color\", \"danger\", 3, \"click\"], [3, \"name\", \"color\"], [\"alt\", \"Imagen de la receta\", 3, \"src\"], [\"slot\", \"end\"], [3, \"click\"], [3, \"click\", 4, \"ngIf\"], [\"style\", \"color: green;\", 4, \"ngIf\"], [\"style\", \"color: red;\", 4, \"ngIf\"], [2, \"color\", \"green\"], [2, \"color\", \"red\"]],\n  template: function FavoritesComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-buttons\", 0);\n      i0.ɵɵelement(2, \"ion-menu-button\");\n      i0.ɵɵelementStart(3, \"ion-title\");\n      i0.ɵɵtext(4, \"Recetas Favoritas\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(5, \"ion-toolbar\")(6, \"ion-segment\", 1);\n      i0.ɵɵtwoWayListener(\"ngModelChange\", function FavoritesComponent_Template_ion_segment_ngModelChange_6_listener($event) {\n        i0.ɵɵtwoWayBindingSet(ctx.selectedCategory, $event) || (ctx.selectedCategory = $event);\n        return $event;\n      });\n      i0.ɵɵlistener(\"ionChange\", function FavoritesComponent_Template_ion_segment_ionChange_6_listener() {\n        return ctx.filterFavorites();\n      });\n      i0.ɵɵelementStart(7, \"ion-segment-button\", 2)(8, \"ion-label\");\n      i0.ɵɵtext(9, \"Desayuno\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(10, \"ion-segment-button\", 3)(11, \"ion-label\");\n      i0.ɵɵtext(12, \"Almuerzo\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(13, \"ion-segment-button\", 4)(14, \"ion-label\");\n      i0.ɵɵtext(15, \"Cena\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(16, \"ion-segment-button\", 5)(17, \"ion-label\");\n      i0.ɵɵtext(18, \"Postre\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(19, \"ion-content\")(20, \"ion-list\");\n      i0.ɵɵtemplate(21, FavoritesComponent_ion_card_21_Template, 12, 9, \"ion-card\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"ion-modal\", 7);\n      i0.ɵɵlistener(\"didDismiss\", function FavoritesComponent_Template_ion_modal_didDismiss_22_listener() {\n        return ctx.closeModal();\n      });\n      i0.ɵɵtemplate(23, FavoritesComponent_ng_template_23_Template, 22, 6, \"ng-template\");\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(6);\n      i0.ɵɵtwoWayProperty(\"ngModel\", ctx.selectedCategory);\n      i0.ɵɵadvance(15);\n      i0.ɵɵproperty(\"ngForOf\", ctx.filteredFavorites);\n      i0.ɵɵadvance();\n      i0.ɵɵproperty(\"isOpen\", ctx.isModalOpen);\n    }\n  },\n  dependencies: [i6.NgForOf, i6.NgIf, i7.IonButton, i7.IonButtons, i7.IonCard, i7.IonCardContent, i7.IonCardHeader, i7.IonCardTitle, i7.IonContent, i7.IonHeader, i7.IonIcon, i7.IonImg, i7.IonItem, i7.IonLabel, i7.IonList, i7.IonMenuButton, i7.IonSegment, i7.IonSegmentButton, i7.IonTitle, i7.IonToolbar, i7.IonModal, i7.SelectValueAccessor, i8.NgControlStatus, i8.NgModel, i6.SlicePipe],\n  styles: [\".delete-button[_ngcontent-%COMP%] {\\n  position: absolute;\\n  top: 5px;\\n  right: 5px;\\n  background: none;\\n  border: none;\\n  color: red;\\n  font-size: 10px;\\n  cursor: pointer;\\n  padding: 0;\\n  \\n\\n}\\n.delete-button[_ngcontent-%COMP%]:hover {\\n  color: darkred;\\n  transform: scale(1);\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9mYXZvcml0ZXMvZmF2b3JpdGVzLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBO0VBQ0ksa0JBQUE7RUFDQSxRQUFBO0VBQ0EsVUFBQTtFQUNBLGdCQUFBO0VBQ0EsWUFBQTtFQUNBLFVBQUE7RUFDQSxlQUFBO0VBQ0EsZUFBQTtFQUNBLFVBQUE7RUFFRSwyREFBQTtBQUROO0FBRUU7RUFDRSxjQUFBO0VBQ0EsbUJBQUE7QUFBSiIsInNvdXJjZXNDb250ZW50IjpbIlxuLmRlbGV0ZS1idXR0b24ge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDVweDtcbiAgICByaWdodDogNXB4O1xuICAgIGJhY2tncm91bmQ6IG5vbmU7XG4gICAgYm9yZGVyOiBub25lO1xuICAgIGNvbG9yOiByZWQ7XG4gICAgZm9udC1zaXplOiAxMHB4O1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICBwYWRkaW5nOiAwO1xuXG4gICAgICAvKiBPcGNpb25hbDogYWdyZWdhciB1biBob3ZlciBwYXJhIG1lam9yYXIgbGEgZXhwZXJpZW5jaWEgKi9cbiAgJjpob3ZlciB7XG4gICAgY29sb3I6IGRhcmtyZWQ7XG4gICAgdHJhbnNmb3JtOiBzY2FsZSgxKTtcbiAgfVxufSAgIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["i0","ɵɵelement","ɵɵproperty","recipe_r2","imageUrl","ɵɵelementStart","ɵɵtemplate","FavoritesComponent_ion_card_21_ion_img_1_Template","ɵɵtext","ɵɵelementEnd","ɵɵlistener","FavoritesComponent_ion_card_21_Template_ion_button_click_8_listener","ɵɵrestoreView","_r1","$implicit","ctx_r2","ɵɵnextContext","ɵɵresetView","openRecipeModal","FavoritesComponent_ion_card_21_Template_ion_button_click_10_listener","removeFromFavorites","id","ɵɵadvance","ɵɵtextInterpolate","titulo","ɵɵtextInterpolate1","ɵɵpipeBind3","descripcion","isFavorite","FavoritesComponent_ng_template_23_ion_button_7_Template_ion_button_click_0_listener","_r5","editRecipe","recipe","selectedRecipe","FavoritesComponent_ng_template_23_ion_item_15_span_3_Template","FavoritesComponent_ng_template_23_ion_item_15_span_4_Template","ɵɵtextInterpolate3","ing_r6","nombre","cantidad","unidad","disponible","FavoritesComponent_ng_template_23_Template_ion_button_click_5_listener","_r4","closeModal","FavoritesComponent_ng_template_23_ion_button_7_Template","FavoritesComponent_ng_template_23_ion_img_9_Template","FavoritesComponent_ng_template_23_ion_item_15_Template","FavoritesComponent_ng_template_23_Template_ion_button_click_20_listener","creadorId","userId","availableIngredients","FavoritesComponent","constructor","auth","firestore","recipeService","inventoryService","router","favorites","filteredFavorites","isModalOpen","selectedCategory","isAuthenticated","console","log","ngOnInit","authState","subscribe","user","uid","filterFavorites","favoritos","collection","doc","ref","where","get","forEach","querySnapshot","datos","data","rec","d","push","checkIngredientsAvailability","ingredientes","getRecipeCommentsWithUser","comments","comentarios","recipeId","delete","recipeIngredients","getInventory","inventory","map","ingredient","inventoryItem","find","item","_item$nombre","_ingredient$nombre","toLowerCase","some","fav","exists","recipeData","navigate","error","ɵɵdirectiveInject","i1","AngularFireAuth","i2","AngularFirestore","i3","RecipeService","i4","InventoryService","i5","Router","selectors","decls","vars","consts","template","FavoritesComponent_Template","rf","ctx","ɵɵtwoWayListener","FavoritesComponent_Template_ion_segment_ngModelChange_6_listener","$event","ɵɵtwoWayBindingSet","FavoritesComponent_Template_ion_segment_ionChange_6_listener","FavoritesComponent_ion_card_21_Template","FavoritesComponent_Template_ion_modal_didDismiss_22_listener","FavoritesComponent_ng_template_23_Template","ɵɵtwoWayProperty"],"sources":["/home/jcanulao/Documentos/Miven1.0.0-main/src/app/components/favorites/favorites.component.ts","/home/jcanulao/Documentos/Miven1.0.0-main/src/app/components/favorites/favorites.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { AngularFirestore } from '@angular/fire/compat/firestore';\nimport { AngularFireAuth } from '@angular/fire/compat/auth';\nimport { RecipeService } from '../../services/recipe.service';\nimport { InventoryService } from '../../services/inventory.service';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-favorites',\n  templateUrl: './favorites.component.html',\n  styleUrls: ['./favorites.component.scss'],\n})\nexport class FavoritesComponent implements OnInit {\n  userId: string | null = null;\n  favorites: any[] = []; // Aquí se almacenan todas las recetas favoritas\n  filteredFavorites: any[] = []; // Recetas filtradas por categoría\n  isModalOpen = false;\n  selectedRecipe: any | null = null;\n  selectedCategory = 'desayuno'; // Categoría seleccionada por defecto\n  isAuthenticated: boolean = false;\n  availableIngredients: any[] = [];\n\n  constructor(\n    private auth: AngularFireAuth,\n    private firestore: AngularFirestore,\n    private recipeService: RecipeService, \n    private inventoryService: InventoryService,\n    private router: Router\n  ) {\n    console.log('en construct');\n  }\n\n  ngOnInit(): void {\n    this.auth.authState.subscribe(user => {\n      this.isAuthenticated = !!user;\n      console.log('isAuthenticated subscribe :: ', this.isAuthenticated);\n      if (this.isAuthenticated) {\n        if (user && user.uid) {\n          this.userId = user.uid;\n          this.filterFavorites();\n        }\n      }\n    });\n  }\n\n  // Método para filtrar las recetas según la categoría seleccionada\n  filterFavorites() {\n    console.log('this === ', this.userId);\n\n    if (this.userId) {   \n      this.filteredFavorites = [];\n      const favoritos = this.firestore.collection('usuarios').doc(this.userId).collection('favoritos',\n        ref => ref.where('category', '==', this.selectedCategory)\n      );\n      favoritos.get().forEach((querySnapshot) => {\n        querySnapshot.forEach((doc) => {\n          const datos = doc.data();\n          console.log('datos ID :: ', doc.id);\n          this.firestore.collection('recetas').doc(datos['recipeId']).get().forEach(\n            (rec) => {\n              const d: any = rec.data();\n              d.id = doc.id;\n              d.creadorId = datos['creadorId'];\n              this.filteredFavorites.push(d);\n            }\n          );\n        });\n      });\n    }\n  }\n\n  openRecipeModal(recipe: any) {\n    this.selectedRecipe = recipe;\n    this.checkIngredientsAvailability(recipe.ingredientes);\n    this.recipeService.getRecipeCommentsWithUser(recipe.id).subscribe((comments: any[]) => {\n      this.selectedRecipe.comentarios = comments;\n    });\n    this.isModalOpen = true;\n  }\n\n  // Método para cerrar el modal\n  closeModal() {\n    this.isModalOpen = false;\n    this.selectedRecipe = null;\n  }\n\n  removeFromFavorites(recipeId: string) {\n    console.log('recipeId :: ', recipeId);\n    if (this.userId) {  \n      this.firestore.collection('usuarios').doc(this.userId).collection('favoritos').doc(recipeId).delete();\n      this.filterFavorites();\n    }\n  }\n\n  checkIngredientsAvailability(recipeIngredients: { nombre: string; cantidad: number; unidad: string }[]) {\n    if (this.userId) {\n      this.inventoryService.getInventory(this.userId).subscribe(inventory => {\n        this.availableIngredients = recipeIngredients.map(ingredient => {\n          const inventoryItem = inventory.find(item => \n            item?.nombre?.toLowerCase() === ingredient?.nombre?.toLowerCase()\n          );\n          return {\n            nombre: ingredient.nombre,\n            cantidad: ingredient.cantidad,\n            unidad: ingredient.unidad,\n            disponible: inventoryItem ? inventoryItem.cantidad >= ingredient.cantidad : false\n          };\n        });\n      });\n    }\n  }\n\n  isFavorite(recipeId: string): boolean {\n    return this.favorites.some(fav => fav.recipeId === recipeId);\n  }\n\n  // Nuevo método para editar receta\n  editRecipe(recipeId: string) {\n    if (this.userId) {\n      this.firestore.collection('recetas').doc(recipeId).get().subscribe((doc) => {\n        if (doc.exists) {\n          const recipeData: any = doc.data();\n          if (recipeData.creadorId === this.userId) {\n            console.log('Navegar a editar receta: ', recipeId);\n            this.router.navigate(['/edit-recipe', recipeId]);\n          } else {\n            console.error('No tienes permisos para editar esta receta');\n          }\n        }\n      });\n    }\n  }\n}\n\n","<ion-header>\n   <ion-buttons slot=\"start\">\n     <ion-menu-button></ion-menu-button>\n   <ion-title>Recetas Favoritas</ion-title>\n   </ion-buttons>\n</ion-header>\n\n<ion-toolbar>\n    \n    <ion-segment [(ngModel)]=\"selectedCategory\" (ionChange)=\"filterFavorites()\">\n      <ion-segment-button value=\"desayuno\">\n        <ion-label>Desayuno</ion-label>\n      </ion-segment-button>\n      <ion-segment-button value=\"almuerzo\">\n        <ion-label>Almuerzo</ion-label>\n      </ion-segment-button>\n      <ion-segment-button value=\"cena\">\n        <ion-label>Cena</ion-label>\n      </ion-segment-button>\n      <ion-segment-button value=\"postre\">\n        <ion-label>Postre</ion-label>\n      </ion-segment-button>\n    </ion-segment>\n  \n  </ion-toolbar>\n\n<!-- {{ filteredFavorites | json }} -->\n<ion-content>\n  <ion-list>\n    <!-- Iterar sobre las recetas favoritas filtradas -->\n    <ion-card *ngFor=\"let recipe of filteredFavorites\">\n      <ion-img *ngIf=\"recipe.imageUrl\" [src]=\"recipe.imageUrl\" alt=\"Imagen de la receta\"></ion-img>\n\n      <ion-card-header>\n        <ion-card-title>{{ recipe.titulo }}</ion-card-title>\n      </ion-card-header>\n\n      <ion-card-content>\n        <!-- {{ recipe  | json}} -->\n        <!-- Mostrar una descripción corta -->\n        {{ recipe.descripcion | slice: 0:100 }}...\n\n        <!-- Botones para ver más y eliminar de favoritos -->\n        <ion-button fill=\"clear\" (click)=\"openRecipeModal(recipe)\">Ver más</ion-button>\n        <ion-button fill=\"clear\" color=\"danger\" (click)=\"removeFromFavorites(recipe.id)\">\n          <ion-icon \n          [name]=\"isFavorite(recipe.id) ? 'heart' : 'heart-outline'\" \n          [color]=\"isFavorite(recipe.id) ? 'danger' : 'medium'\">\n        </ion-icon>\n      </ion-button>\n\n      </ion-card-content>\n    </ion-card>\n  </ion-list>\n\n  <!-- Modal de detalles de la receta -->\n  <ion-modal [isOpen]=\"isModalOpen\" (didDismiss)=\"closeModal()\">\n    <ng-template>\n      <ion-header>\n        <ion-toolbar>\n          <ion-title>{{ selectedRecipe?.titulo }}</ion-title>\n          <ion-buttons slot=\"end\">\n            <ion-button (click)=\"closeModal()\">Cerrar</ion-button>\n            <ion-button *ngIf=\"recipe.creadorId === userId\" (click)=\"editRecipe(recipe.id)\">\n              Editar Receta\n            </ion-button>\n          </ion-buttons>\n        </ion-toolbar>\n      </ion-header>\n\n      <ion-content>\n        <ion-img *ngIf=\"selectedRecipe?.imageUrl\" [src]=\"selectedRecipe?.imageUrl\" alt=\"Imagen de la receta\"></ion-img>\n\n        <ion-list>\n          <ion-item>\n            <ion-label>\n              <h2>{{ selectedRecipe?.titulo }}</h2>\n            </ion-label>\n          </ion-item>\n\n          <!-- Descripción completa -->\n\n          <ion-item *ngFor=\"let ing of availableIngredients\">\n            <ion-label>\n              {{ ing.nombre }} - {{ ing.cantidad }} {{ ing.unidad }}\n              <span *ngIf=\"ing.disponible\" style=\"color: green;\">Disponible</span>\n              <span *ngIf=\"!ing.disponible\" style=\"color: red;\">No disponible</span>\n            </ion-label>\n          </ion-item>\n\n\n    <ion-item>\n         <ion-label>\n          <h2>{{ selectedRecipe?.descripcion }}</h2>\n        </ion-label>\n      </ion-item>\n\n    \n    </ion-list>\n\n        <ion-button (click)=\"closeModal()\">Cerrar</ion-button>\n      </ion-content>\n    </ng-template>\n  </ion-modal>\n</ion-content>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}